(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[785],{73947:function(S){S.exports={listContent:"listContent___3vedS",description:"description___3PN_4",extra:"extra___1NSLt"}},98250:function(S){S.exports={standardList:"standardList___kz2pc",headerInfo:"headerInfo___2cRCO",listContent:"listContent___LdtIk",listContentItem:"listContentItem___3NLFa",extraContentSearch:"extraContentSearch___1hRjc",listCard:"listCard___1nD9x",standardListForm:"standardListForm___Aq-Np",formResult:"formResult___2xNbB",listItemMetaTitle:"listItemMetaTitle___2I_Vl",listItemExtra:"listItemExtra___y5uWL",selfTrigger:"selfTrigger___9x7cu",activitiesList:"activitiesList___1qnhj",username:"username___3PmLk",event:"event___27cR9",pageHeaderContent:"pageHeaderContent___1kD8-",avatar:"avatar___1_XIl",content:"content___2OTuT",contentTitle:"contentTitle___1Ifis",extraContent:"extraContent___1AWND",statItem:"statItem___X4Kpk",members:"members___2MGoO",member:"member___17If9",projectList:"projectList___3aP5Q",cardTitle:"cardTitle___9n-it",projectGrid:"projectGrid___2FO9w",projectItemContent:"projectItemContent___2TSFf",datetime:"datetime___1nNWy",activeCard:"activeCard___2O5-J",headerList:"headerList___1unww",stepDescription:"stepDescription___3VOaI"}},2235:function(S,R,e){"use strict";e.r(R),e.d(R,{Current1Cert:function(){return W},default:function(){return Ct}});var Lt=e(58024),V=e(39144),St=e(54421),D=e(38272),pt=e(57663),E=e(71577),Tt=e(95300),B=e(7277),Pt=e(98858),y=e(4914),m=e(8870),p=e(2824),c=e(67294),$=e(64335),K=e(81907),Q=e(49101),X=e(97363),Mt=e(71194),Y=e(57016),Nt=e(43185),b=e(94412),Ft=e(57106),w=e(99683),Ot=e(9715),T=e(82482),Dt=e(34792),G=e(48086),Et=e(47673),k=e(4107),q=e(30381),_=e.n(q),tt=e(98250),C=e.n(tt),et=e(84391),t=e(85893),nt=k.Z.TextArea,at={labelCol:{span:7},wrapperCol:{span:13}};function rt(r){var n=r.type==="image/jpeg"||r.type==="image/png";n||G.default.error("You can only upload JPG/PNG file!");var a=r.size/1024/1024<2;return a||G.default.error("Image must smaller than 2MB!"),n&&a}var st=function(n){var a=T.Z.useForm(),v=(0,p.Z)(a,1),i=v[0],l=n.done,f=n.visible,d=n.current,h=n.onDone,P=n.onCancel,M=n.onSubmit;(0,c.useEffect)(function(){i&&!f&&i.resetFields()},[n.visible]),(0,c.useEffect)(function(){d&&i.setFieldsValue((0,m.Z)((0,m.Z)({},d),{},{createdAt:d.createdAt?_()(d.createdAt):null}))},[n.current]);var N=function(){!i||i.submit()},x=[],L=function(j){M&&(console.log("2. imagevalues: "+x),j.imagesupload_id=x,M(j))},U=l?{footer:null,onCancel:h}:{okText:"Save",onOk:N,onCancel:P},F=function(){if(l)return(0,t.jsx)(w.ZP,{status:"success",title:"Done",extra:(0,t.jsx)(E.Z,{type:"primary",onClick:h,children:"Okay"}),className:C().formResult});var j={name:"imagefile",action:"https://antapi.pythonanywhere.com/calibration/comment/image/",beforeUpload:{beforeUpload:rt},headers:{Authorization:"JWT "+localStorage.getItem("access_token")},onChange:function(Z){var I=Z.file,z=Z.fileList;I.status!=="uploading"&&(console.log(I,z),console.log(I.response.id),x.push(I.response.id),console.log("2. imagevalues: "+x))}};return(0,t.jsxs)(T.Z,(0,m.Z)((0,m.Z)({},at),{},{form:i,onFinish:L,children:[(0,t.jsx)(T.Z.Item,{label:"Upload",name:"uploadimages",children:(0,t.jsx)(b.Z,(0,m.Z)((0,m.Z)({},j),{},{children:(0,t.jsx)(E.Z,{icon:(0,t.jsx)(et.Z,{}),children:"Click to Upload"})}))}),(0,t.jsx)(T.Z.Item,{name:"content",label:"Content",rules:[{message:"Minimum 5 characters",min:5}],children:(0,t.jsx)(nt,{rows:4,placeholder:"Minimum 5 characters"})})]}))};return(0,t.jsx)(Y.Z,(0,m.Z)((0,m.Z)({title:l?null:"".concat(d?"Edit":"Write"," a commment..."),className:C().standardListForm,width:640,destroyOnClose:!0,visible:f},U),{},{children:F()}))},ot=st,it=e(73935),At=e(94233),lt=e(51890),Ut=e(49111),dt=e(19650),zt=e(12968),H=e(62462),mt=e(73947),A=e.n(mt);function ut(r){var n=r.jsonImage,a=n.map(function(v){return(0,t.jsx)(H.Z,{width:50,src:v.imagefile})});return a}function ct(r){var n=r.jsonImage;return n.length===0?null:n.length!==0?(0,t.jsx)(H.Z.PreviewGroup,{children:(0,t.jsx)(dt.Z,{size:"middle",children:(0,t.jsx)(ut,{jsonImage:n})})}):(0,t.jsx)("h1",{children:"Error."})}var vt=function(n){var a=n.data,v=a.content,i=a.name,l=a.created,f=a.user,d=a.href,h=a.image;return(0,t.jsxs)("div",{className:A().listContent,children:[(0,t.jsx)("div",{className:A().description,children:v}),(0,t.jsx)(ct,{jsonImage:h}),(0,t.jsxs)("div",{className:A().extra,children:[(0,t.jsx)(lt.C,{src:f.avatar,size:"small"}),(0,t.jsx)("a",{href:d,children:f.user_name}),(0,t.jsx)("em",{children:l})]})]})},ft=vt,W=function(n){var a=(0,c.useRef)(null),v=n.loading,i=n.dispatch,l=n.Current4Cert.Current5Cert,f=(0,c.useState)(!1),d=(0,p.Z)(f,2),h=d[0],P=d[1],M=(0,c.useState)(!1),N=(0,p.Z)(M,2),x=N[0],L=N[1],U=(0,c.useState)(void 0),F=(0,p.Z)(U,2),g=F[0],j=F[1];(0,c.useEffect)(function(){i({type:"Current4Cert/fetch",payload:{}})},[1]);var J=function(){L(!0),j(void 0)},Z=function(){if(a.current){var o=(0,it.findDOMNode)(a.current);setTimeout(function(){return o.blur()},0)}},I=function(){Z(),P(!1),L(!1)},z=function(){Z(),L(!1)},ht=function(o){var s=localStorage.getItem("topic_id"),O=g?g.id:s;Z(),P(!0),i({type:"Current4Cert/submit",payload:(0,m.Z)({id:O},o)})},xt={showSizeChanger:!0,showQuickJumper:!0,pageSize:5},gt=function(o){var s=o.currentUser2,O=s.user?s.user.user_name:s.user;return console.log(O),(0,t.jsx)($.Z.Consumer,{children:function(It){var yt=It.isMobile;return(0,t.jsxs)(y.Z,{className:C().headerList,size:"small",column:yt?1:2,children:[(0,t.jsx)(y.Z.Item,{label:"Author",children:O}),(0,t.jsx)(y.Z.Item,{label:"Customer",children:s.customer}),(0,t.jsx)(y.Z.Item,{label:"Instrument",children:s.instrument}),(0,t.jsx)(y.Z.Item,{label:"Updated",children:s.updated})]})}})},jt=function(o){var s=o.currentTitle;return(0,t.jsx)("div",{children:s.certificate_id})},Zt=function(o){var s=o.currentExtra;return(0,t.jsxs)("div",{className:C().extraContent,children:[(0,t.jsx)("div",{className:C().statItem,children:(0,t.jsx)(B.Z,{title:"Comment",value:s.post_count})}),(0,t.jsx)("div",{className:C().statItem,children:(0,t.jsx)(B.Z,{title:"View",value:s.views})})]})};return(0,t.jsxs)("div",{children:[(0,t.jsx)(K.ZP,{title:(0,t.jsx)(jt,{currentTitle:l}),content:(0,t.jsx)(gt,{currentUser2:l}),extraContent:(0,t.jsx)(Zt,{currentExtra:l}),children:(0,t.jsxs)(V.Z,{children:[(0,t.jsxs)(E.Z,{type:"dashed",style:{width:"100%",marginBottom:8},onClick:J,ref:a,children:[(0,t.jsx)(Q.Z,{}),"Write a commment..."]}),(0,t.jsx)(D.ZP,{size:"large",loading:v,pagination:xt,rowKey:"id",itemLayout:"vertical",dataSource:l.comments,renderItem:function(o){return(0,t.jsxs)(D.ZP.Item,{children:[(0,t.jsx)(D.ZP.Item.Meta,{}),(0,t.jsx)(ft,{data:o})]},o.id)}})]})}),(0,t.jsx)(ot,{done:h,current:g,visible:x,onDone:I,onCancel:z,onSubmit:ht})]})},Ct=(0,X.$j)(function(r){var n=r.Current4Cert,a=r.loading;return{Current4Cert:n,loading:a.models.Current4Cert}})(W)}}]);
