(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[783],{39669:function(ce,B,s){"use strict";s.r(B),s.d(B,{default:function(){return le}});var fe=s(57338),U=s(25084),me=s(57663),Z=s(71577),he=s(49111),O=s(19650),y=s(2824),G=s(8870),pe=s(34792),h=s(48086),p=s(3182),K=s(94043),i=s.n(K),P=s(49101),b=s(67294),o=s(97363),W=s(81907),Y=s(85224),z=s(9183),J=s(37476),H=s(5966),A=s(90672),Q=s(96459),ge=s(71194),X=s(57016),x=s(3843),R=s(64317),k=s(86615),q=s(22452),e=s(85893),_=function(d){var r=(0,o.YB)();return(0,e.jsxs)(x.Z,{stepsProps:{size:"small"},stepsFormRender:function(g,a){return(0,e.jsx)(X.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:r.formatMessage({id:"pages.searchTable.updateForm.ruleConfig",defaultMessage:"\u89C4\u5219\u914D\u7F6E"}),visible:d.updateModalVisible,footer:a,onCancel:function(){d.onCancel()},children:g})},onFinish:d.onSubmit,children:[(0,e.jsxs)(x.Z.StepForm,{initialValues:{name:d.values.name,desc:d.values.desc},title:r.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),children:[(0,e.jsx)(H.Z,{name:"name",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"\u89C4\u5219\u540D\u79F0"}),width:"md",rules:[{required:!0,message:(0,e.jsx)(o._H,{id:"pages.searchTable.updateForm.ruleName.nameRules",defaultMessage:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"})}]}),(0,e.jsx)(A.Z,{name:"desc",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descLabel",defaultMessage:"\u89C4\u5219\u63CF\u8FF0"}),placeholder:r.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26"}),rules:[{required:!0,message:(0,e.jsx)(o._H,{id:"pages.searchTable.updateForm.ruleDesc.descRules",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01"}),min:5}]})]}),(0,e.jsxs)(x.Z.StepForm,{initialValues:{target:"0",template:"0"},title:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.title",defaultMessage:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027"}),children:[(0,e.jsx)(R.Z,{name:"target",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.object",defaultMessage:"\u76D1\u63A7\u5BF9\u8C61"}),valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,e.jsx)(R.Z,{name:"template",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.templateLabel",defaultMessage:"\u89C4\u5219\u6A21\u677F"}),valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,e.jsx)(k.Z.Group,{name:"type",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.typeLabel",defaultMessage:"\u89C4\u5219\u7C7B\u578B"}),options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,e.jsxs)(x.Z.StepForm,{initialValues:{type:"1",frequency:"month"},title:r.formatMessage({id:"pages.searchTable.updateForm.schedulingPeriod.title",defaultMessage:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F"}),children:[(0,e.jsx)(q.Z,{name:"time",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.schedulingPeriod.timeLabel",defaultMessage:"\u5F00\u59CB\u65F6\u95F4"}),rules:[{required:!0,message:(0,e.jsx)(o._H,{id:"pages.searchTable.updateForm.schedulingPeriod.timeRules",defaultMessage:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"})}]}),(0,e.jsx)(R.Z,{name:"frequency",label:r.formatMessage({id:"pages.searchTable.updateForm.object",defaultMessage:"\u76D1\u63A7\u5BF9\u8C61"}),width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},ee=_,C=s(36571),ae=function(){var v=(0,p.Z)(i().mark(function d(r){var c;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=h.default.loading("\u6B63\u5728\u6DFB\u52A0"),a.prev=1,a.next=4,(0,C.HP)((0,G.Z)({},r));case 4:return c(),h.default.success("Added successfully"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),c(),h.default.error("Adding failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},d,null,[[1,9]])}));return function(r){return v.apply(this,arguments)}}(),se=function(){var v=(0,p.Z)(i().mark(function d(r){var c;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=h.default.loading("Configuring"),a.prev=1,a.next=4,(0,C.D7)({name:r.name,desc:r.desc,key:r.key});case 4:return c(),h.default.success("Configuration is successful"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),c(),h.default.error("Configuration failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},d,null,[[1,9]])}));return function(r){return v.apply(this,arguments)}}(),re=function(){var v=(0,p.Z)(i().mark(function d(r){var c;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=h.default.loading("\u6B63\u5728\u5220\u9664"),r){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,(0,C.DV)({key:r.map(function(T){return T.key})});case 6:return c(),h.default.success("Deleted successfully and will refresh soon"),a.abrupt("return",!0);case 11:return a.prev=11,a.t0=a.catch(3),c(),h.default.error("Delete failed, please try again"),a.abrupt("return",!1);case 16:case"end":return a.stop()}},d,null,[[3,11]])}));return function(r){return v.apply(this,arguments)}}(),te=function(){var d=(0,b.useState)(!1),r=(0,y.Z)(d,2),c=r[0],g=r[1],a=(0,b.useState)(!1),T=(0,y.Z)(a,2),ne=T[0],w=T[1],ue=(0,b.useState)(!1),D=(0,y.Z)(ue,2),V=D[0],ie=D[1],F=(0,b.useRef)(),de=(0,b.useState)(),$=(0,y.Z)(de,2),f=$[0],S=$[1],oe=(0,b.useState)([]),E=(0,y.Z)(oe,2),M=E[0],I=E[1],L=(0,o.YB)(),N=[{title:"#",dataIndex:"index",valueType:"indexBorder",width:48},{title:"Name",dataIndex:["avatar","imagefile"],valueType:"avatar",tip:"Terms and Conditions May Apply",render:function(t,l){return(0,e.jsxs)(O.Z,{children:[(0,e.jsx)("span",{children:t}),l.name]})},hideInSearch:!0},{title:"Price",dataIndex:"price",sorter:!0,hideInSearch:!0},{title:"Category",dataIndex:"category",valueEnum:{Burgers:{text:"Burgers"},Beverages:{text:"Beverages"}},hideInTable:!0},{title:(0,e.jsx)(o._H,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(t,l){return[(0,e.jsx)("a",{onClick:function(){w(!0),S(l)},children:(0,e.jsx)(Z.Z,{shape:"circle",icon:(0,e.jsx)(P.Z,{})})},"config")]}}];return(0,e.jsxs)(W.ZP,{children:[(0,e.jsx)(z.ZP,{headerTitle:L.formatMessage({id:"pages.searchTable.title",defaultMessage:"Enquiry form"}),actionRef:F,rowKey:function(t,l){return"complete".concat(t.id).concat(l)},search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(Z.Z,{type:"primary",onClick:function(){g(!0)},children:[(0,e.jsx)(P.Z,{})," ",(0,e.jsx)(o._H,{id:"pages.searchTable.new",defaultMessage:"New"})]},"primary")]},request:function(){var n=(0,p.Z)(i().mark(function t(l){var m;return i().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,C.jR)(l);case 2:return m=u.sent,u.abrupt("return",Promise.resolve({data:m,success:!0}));case 4:case"end":return u.stop()}},t)}));return function(t){return n.apply(this,arguments)}}(),columns:N,rowSelection:{onChange:function(t,l){I(l)}}}),(M==null?void 0:M.length)>0&&(0,e.jsxs)(Y.Z,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(o._H,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,e.jsx)("a",{style:{fontWeight:600},children:M.length})," ",(0,e.jsx)(o._H,{id:"pages.searchTable.item",defaultMessage:"\u9879"}),"\xA0\xA0",(0,e.jsxs)("span",{children:[(0,e.jsx)(o._H,{id:"pages.searchTable.totalServiceCalls",defaultMessage:"Total number of service calls"})," ",M.reduce(function(n,t){return n+t.callNo},0)," ",(0,e.jsx)(o._H,{id:"pages.searchTable.tenThousand",defaultMessage:"\u4E07"})]})]}),children:[(0,e.jsx)(Z.Z,{onClick:(0,p.Z)(i().mark(function n(){var t,l;return i().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,re(M);case 2:I([]),(t=F.current)===null||t===void 0||(l=t.reloadAndRest)===null||l===void 0||l.call(t);case 4:case"end":return j.stop()}},n)})),children:(0,e.jsx)(o._H,{id:"pages.searchTable.batchDeletion",defaultMessage:"Batch deletion"})}),(0,e.jsx)(Z.Z,{type:"primary",children:(0,e.jsx)(o._H,{id:"pages.searchTable.batchApproval",defaultMessage:"Batch approval"})})]}),(0,e.jsxs)(J.Z,{title:L.formatMessage({id:"pages.searchTable.createForm.newRule",defaultMessage:"New rule"}),width:"400px",visible:c,onVisibleChange:g,onFinish:function(){var n=(0,p.Z)(i().mark(function t(l){var m;return i().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,ae(l);case 2:m=u.sent,m&&(g(!1),F.current&&F.current.reload());case 4:case"end":return u.stop()}},t)}));return function(t){return n.apply(this,arguments)}}(),children:[(0,e.jsx)(H.Z,{rules:[{required:!0,message:(0,e.jsx)(o._H,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}],width:"md",name:"name"}),(0,e.jsx)(A.Z,{width:"md",name:"desc"})]}),(0,e.jsx)(ee,{onSubmit:function(){var n=(0,p.Z)(i().mark(function t(l){var m;return i().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,se(l);case 2:m=u.sent,m&&(w(!1),S(void 0),F.current&&F.current.reload());case 4:case"end":return u.stop()}},t)}));return function(t){return n.apply(this,arguments)}}(),onCancel:function(){w(!1),V||S(void 0)},updateModalVisible:ne,values:f||{}}),(0,e.jsx)(U.Z,{width:600,visible:V,onClose:function(){S(void 0),ie(!1)},closable:!1,children:(f==null?void 0:f.name)&&(0,e.jsx)(Q.Z,{column:2,title:f==null?void 0:f.name,request:(0,p.Z)(i().mark(function n(){return i().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{data:f||{}});case 1:case"end":return l.stop()}},n)})),params:{id:f==null?void 0:f.name},columns:N})})]})},le=te}}]);
