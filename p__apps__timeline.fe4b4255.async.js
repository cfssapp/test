(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[511],{15507:function(J){J.exports={standardList:"standardList___2sn6F",headerInfo:"headerInfo___1CvZH",listContent:"listContent___33Llr",listContentItem:"listContentItem___3sXHk",extraContentSearch:"extraContentSearch___1_GRm",listCard:"listCard___2afOu",standardListForm:"standardListForm___1nPfn",formResult:"formResult___3-IHz",listItemMetaTitle:"listItemMetaTitle___i1Zcs",listItemExtra:"listItemExtra___3cRAl",selfTrigger:"selfTrigger___2jHDW",activitiesList:"activitiesList___2Ea5J",username:"username___3Sr_p",event:"event___2oNE5",pageHeaderContent:"pageHeaderContent___2zJtg",avatar:"avatar___YIl-P",content:"content___1KcY-",contentTitle:"contentTitle___3bM1e",extraContent:"extraContent___GFHF5",statItem:"statItem___3hu1l",members:"members___1lmac",member:"member___1d4jr",projectList:"projectList___1EPvQ",cardTitle:"cardTitle___1nDVV",projectGrid:"projectGrid___1OX0x",projectItemContent:"projectItemContent___geKCL",datetime:"datetime___1fZqL",activeCard:"activeCard___GgIgz",headerList:"headerList___2N4_9",stepDescription:"stepDescription___ez6ur"}},1332:function(J,V,e){"use strict";e.r(V),e.d(V,{Time1line:function(){return K},default:function(){return ve}});var Te=e(58024),X=e(39144),Ze=e(54421),O=e(38272),pe=e(94233),B=e(51890),ye=e(71748),Y=e(33860),d=e(8870),S=e(2824),b=e(3182),w=e(94043),Q=e.n(w),v=e(67294),k=e(75362),E=e(97363),Se=e(71194),q=e(57016),Ie=e(43185),_=e(94412),Le=e(57106),ee=e(99683),Fe=e(57663),W=e(71577),Pe=e(9715),I=e(82482),Ne=e(47673),te=e(4107),ne=e(30381),R=e.n(ne),ae=e(15507),i=e.n(ae),re=e(84391),se=e(98005),ie=e.n(se),t=e(85893),le=te.Z.TextArea,oe={labelCol:{span:7},wrapperCol:{span:13}},de=function(a){var h=I.Z.useForm(),F=(0,S.Z)(h,1),c=F[0],g=a.done,P=a.visible,C=a.current,T=a.onDone,N=a.onCancel,A=a.onSubmit;(0,v.useEffect)(function(){c&&!P&&c.resetFields()},[a.visible]),(0,v.useEffect)(function(){C&&c.setFieldsValue((0,d.Z)((0,d.Z)({},C),{},{createdAt:C.createdAt?R()(C.createdAt):null}))},[a.current]);var M=function(){!c||c.submit()},x=[],D=function(u){A&&(console.log("2. imagevalues: "+x),u.imagesupload_id=x,A(u))},U=g?{footer:null,onCancel:T}:{okText:"Save",onOk:M,onCancel:N},H=function(){if(g)return(0,t.jsx)(ee.ZP,{status:"success",title:"Done",extra:(0,t.jsx)(W.Z,{type:"primary",onClick:T,children:"Okay"}),className:i().formResult});var u={name:"imagefile",action:"https://antapi.pythonanywhere.com/calibration/comment/image/",beforeUpload:function(m){return new Promise(function(o){var f=(m.size/1024/1024).toFixed(1),Z;if(f<1)Z=1;else if(f<2)Z=.6;else if(f<5)Z=.4;else return new Promise(function(p,y){y({msg:"Image not larger than 10m"})});new(ie())(m,{quality:Z,success:function(y){o(y)}})})},headers:{Authorization:"JWT "+localStorage.getItem("access_token")},onChange:function(m){var o=m.file,f=m.fileList;o.status!=="uploading"&&(console.log(o,f),console.log(o.response.id),x.push(o.response.id),console.log("2. imagevalues: "+x))}};return(0,t.jsxs)(I.Z,(0,d.Z)((0,d.Z)({},oe),{},{form:c,onFinish:D,children:[(0,t.jsx)(I.Z.Item,{label:"Upload",name:"uploadimages",children:(0,t.jsx)(_.Z,(0,d.Z)((0,d.Z)({},u),{},{children:(0,t.jsx)(W.Z,{icon:(0,t.jsx)(re.Z,{}),children:"Click to Upload"})}))}),(0,t.jsx)(I.Z.Item,{name:"content",label:"Content",rules:[{message:"Minimum 5 characters",min:5}],children:(0,t.jsx)(le,{rows:4,placeholder:"Minimum 5 characters"})})]}))};return(0,t.jsx)(q.Z,(0,d.Z)((0,d.Z)({title:g?null:"".concat(C?"Edit":"Write"," a commment..."),className:i().standardListForm,width:640,destroyOnClose:!0,visible:P},U),{},{children:H()}))},ce=de,ue=e(73935),me=e(1174),K=function(a){var h=(0,v.useRef)(null),F=(0,E.QT)(function(){var l=(0,b.Z)(Q().mark(function n(r){var s;return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,me.fp)(r);case 2:return s=j.sent,j.abrupt("return",s);case 4:case"end":return j.stop()}},n)}));return function(n){return l.apply(this,arguments)}}(),{formatResult:function(n){return n}}),c=F.loading,g=F.data,P=g===void 0?[]:g,C=a.loading,T=a.dispatch,N=a.Time4line.Time5line,A=(0,v.useState)(!1),M=(0,S.Z)(A,2),x=M[0],D=M[1],U=(0,v.useState)(!1),H=(0,S.Z)(U,2),z=H[0],u=H[1],G=(0,v.useState)(void 0),m=(0,S.Z)(G,2),o=m[0],f=m[1];(0,v.useEffect)(function(){T({type:"Time4line/fetch",payload:{}})},[1]);var Z=function(){u(!0),f(void 0)},p=function(){if(h.current){var n=(0,ue.findDOMNode)(h.current);setTimeout(function(){return n.blur()},0)}},y=function(){p(),D(!1),u(!1)},fe=function(){p(),u(!1)},he=function(n){var r=localStorage.getItem("topic_id"),s=o?o.id:r;p(),D(!0),T({type:"Time4line/submit",payload:(0,d.Z)({id:s},n)})},ge={showSizeChanger:!1,showQuickJumper:!1,pageSize:10};R().locale("en");var Ce=function(n){var r=n.currentTitle;return(0,t.jsx)("div",{children:"Timeline"})},xe=function(n){var r=n.currentUser2,s=r&&Object.keys(r).length;if(!s)return(0,t.jsx)(Y.Z,{avatar:!0,paragraph:{rows:1},active:!0});var $=r&&r.user_name;return console.log($),(0,t.jsxs)("div",{className:i().pageHeaderContent,children:[(0,t.jsx)("div",{className:i().avatar,children:(0,t.jsx)(B.C,{size:"large",src:r.avatar})}),(0,t.jsxs)("div",{className:i().content,children:[(0,t.jsx)("div",{className:i().contentTitle,children:r.user_name}),(0,t.jsx)("div",{children:"admin@admin.com"})]})]})},je=function(n){var r=n.template.split(/@\{([^{}]*)\}/gi).map(function(s){return n[s]?(0,t.jsx)("a",{onClick:function(){localStorage.setItem("topic_id",n[s].id),window.scrollTo(0,0),E.m8.push("/calibration/certificate/details")},children:n[s].certificate_id},n[s].certificate_id):s});return(0,t.jsx)(O.ZP.Item,{children:(0,t.jsx)(O.ZP.Item.Meta,{avatar:(0,t.jsx)(B.C,{src:n.user.avatar}),title:(0,t.jsxs)("span",{children:[(0,t.jsx)("a",{className:i().username,children:n.user.user_name}),"\xA0",(0,t.jsx)("span",{className:i().event,children:r})]}),description:(0,t.jsx)("span",{className:i().datetime,title:n.created,children:R()(n.created).fromNow()})})},n.id)};return(0,t.jsxs)("div",{children:[(0,t.jsx)(k.ZP,{title:(0,t.jsx)(Ce,{currentTitle:N}),content:(0,t.jsx)(xe,{currentUser2:N}),children:(0,t.jsx)(X.Z,{bodyStyle:{padding:0},bordered:!1,className:i().activeCard,title:"Activity Log",loading:c,children:(0,t.jsx)(O.ZP,{loading:c,renderItem:function(n){return je(n)},dataSource:P,className:i().activitiesList,size:"large",pagination:ge})})}),(0,t.jsx)(ce,{done:x,current:o,visible:z,onDone:y,onCancel:fe,onSubmit:he})]})},ve=(0,E.$j)(function(L){var a=L.Time4line,h=L.loading;return{Time4line:a,loading:h.models.Time4line}})(K)}}]);
