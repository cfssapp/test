(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[511],{15507:function(U){U.exports={standardList:"standardList___2sn6F",headerInfo:"headerInfo___1CvZH",listContent:"listContent___33Llr",listContentItem:"listContentItem___3sXHk",extraContentSearch:"extraContentSearch___1_GRm",listCard:"listCard___2afOu",standardListForm:"standardListForm___1nPfn",formResult:"formResult___3-IHz",listItemMetaTitle:"listItemMetaTitle___i1Zcs",listItemExtra:"listItemExtra___3cRAl",selfTrigger:"selfTrigger___2jHDW",activitiesList:"activitiesList___2Ea5J",username:"username___3Sr_p",event:"event___2oNE5",pageHeaderContent:"pageHeaderContent___2zJtg",avatar:"avatar___YIl-P",content:"content___1KcY-",contentTitle:"contentTitle___3bM1e",extraContent:"extraContent___GFHF5",statItem:"statItem___3hu1l",members:"members___1lmac",member:"member___1d4jr",projectList:"projectList___1EPvQ",cardTitle:"cardTitle___1nDVV",projectGrid:"projectGrid___1OX0x",projectItemContent:"projectItemContent___geKCL",datetime:"datetime___1fZqL",activeCard:"activeCard___GgIgz",headerList:"headerList___2N4_9",stepDescription:"stepDescription___ez6ur"}},1332:function(U,R,e){"use strict";e.r(R),e.d(R,{Time1line:function(){return $},default:function(){return oe}});var he=e(58024),Q=e(39144),ge=e(54421),H=e(38272),xe=e(94233),B=e(51890),Ce=e(71748),W=e(33860),l=e(8870),S=e(2824),v=e(67294),b=e(75362),G=e(97363),je=e(71194),K=e(57016),Te=e(43185),X=e(94412),Ze=e(57106),Y=e(99683),Fe=e(57663),J=e(71577),Se=e(9715),y=e(82482),ye=e(47673),w=e(4107),k=e(30381),V=e.n(k),q=e(15507),r=e.n(q),_=e(84391),ee=e(98005),te=e.n(ee),t=e(85893),ne=w.Z.TextArea,ae={labelCol:{span:7},wrapperCol:{span:13}},se=function(a){var h=y.Z.useForm(),p=(0,S.Z)(h,1),o=p[0],g=a.done,I=a.visible,x=a.current,j=a.onDone,L=a.onCancel,A=a.onSubmit;(0,v.useEffect)(function(){o&&!I&&o.resetFields()},[a.visible]),(0,v.useEffect)(function(){x&&o.setFieldsValue((0,l.Z)((0,l.Z)({},x),{},{createdAt:x.createdAt?V()(x.createdAt):null}))},[a.current]);var E=function(){!o||o.submit()},C=[],P=function(u){A&&(console.log("2. imagevalues: "+C),u.imagesupload_id=C,A(u))},z=g?{footer:null,onCancel:j}:{okText:"Save",onOk:E,onCancel:L},N=function(){if(g)return(0,t.jsx)(Y.ZP,{status:"success",title:"Done",extra:(0,t.jsx)(J.Z,{type:"primary",onClick:j,children:"Okay"}),className:r().formResult});var u={name:"imagefile",action:"https://antapi.pythonanywhere.com/calibration/comment/image/",beforeUpload:function(c){return new Promise(function(i){var f=(c.size/1024/1024).toFixed(1),T;if(f<1)T=1;else if(f<2)T=.6;else if(f<5)T=.4;else return new Promise(function(Z,F){F({msg:"Image not larger than 10m"})});new(te())(c,{quality:T,success:function(F){i(F)}})})},headers:{Authorization:"JWT "+localStorage.getItem("access_token")},onChange:function(c){var i=c.file,f=c.fileList;i.status!=="uploading"&&(console.log(i,f),console.log(i.response.id),C.push(i.response.id),console.log("2. imagevalues: "+C))}};return(0,t.jsxs)(y.Z,(0,l.Z)((0,l.Z)({},ae),{},{form:o,onFinish:P,children:[(0,t.jsx)(y.Z.Item,{label:"Upload",name:"uploadimages",children:(0,t.jsx)(X.Z,(0,l.Z)((0,l.Z)({},u),{},{children:(0,t.jsx)(J.Z,{icon:(0,t.jsx)(_.Z,{}),children:"Click to Upload"})}))}),(0,t.jsx)(y.Z.Item,{name:"content",label:"Content",rules:[{message:"Minimum 5 characters",min:5}],children:(0,t.jsx)(ne,{rows:4,placeholder:"Minimum 5 characters"})})]}))};return(0,t.jsx)(K.Z,(0,l.Z)((0,l.Z)({title:g?null:"".concat(x?"Edit":"Write"," a commment..."),className:r().standardListForm,width:640,destroyOnClose:!0,visible:I},z),{},{children:N()}))},re=se,ie=e(73935),le=e(1174),$=function(a){var h=(0,v.useRef)(null),p=(0,G.QT)(le.fp),o=p.loading,g=p.data,I=g===void 0?[]:g,x=a.loading,j=a.dispatch,L=a.Time4line.Time5line,A=(0,v.useState)(!1),E=(0,S.Z)(A,2),C=E[0],P=E[1],z=(0,v.useState)(!1),N=(0,S.Z)(z,2),M=N[0],u=N[1],O=(0,v.useState)(void 0),c=(0,S.Z)(O,2),i=c[0],f=c[1];(0,v.useEffect)(function(){j({type:"Time4line/fetch",payload:{}})},[1]);var T=function(){u(!0),f(void 0)},Z=function(){if(h.current){var n=(0,ie.findDOMNode)(h.current);setTimeout(function(){return n.blur()},0)}},F=function(){Z(),P(!1),u(!1)},de=function(){Z(),u(!1)},ue=function(n){var s=localStorage.getItem("topic_id"),d=i?i.id:s;Z(),P(!0),j({type:"Time4line/submit",payload:(0,l.Z)({id:d},n)})},De={showSizeChanger:!0,showQuickJumper:!0,pageSize:5},ce=function(n){var s=n.currentTitle;return(0,t.jsx)("div",{children:"Timeline"})},me=function(n){var s=n.currentUser2,d=s&&Object.keys(s).length;if(!d)return(0,t.jsx)(W.Z,{avatar:!0,paragraph:{rows:1},active:!0});var fe=s&&s.user_name;return console.log(fe),(0,t.jsxs)("div",{className:r().pageHeaderContent,children:[(0,t.jsx)("div",{className:r().avatar,children:(0,t.jsx)(B.C,{size:"large",src:s.avatar})}),(0,t.jsxs)("div",{className:r().content,children:[(0,t.jsx)("div",{className:r().contentTitle,children:s.user_name}),(0,t.jsx)("div",{children:"\u4EA4\u4E92\u4E13\u5BB6 |\u8682\u8681\u91D1\u670D\uFF0D\u67D0\u67D0\u67D0\u4E8B\u4E1A\u7FA4\uFF0D\u67D0\u67D0\u5E73\u53F0\u90E8\uFF0D\u67D0\u67D0\u6280\u672F\u90E8\uFF0DUED"})]})]})},ve=function(n){var s=n.template.split(/@\{([^{}]*)\}/gi).map(function(d){return n[d]?(0,t.jsx)("a",{href:n[d].link,children:n[d].name},n[d].name):d});return(0,t.jsx)(H.ZP.Item,{children:(0,t.jsx)(H.ZP.Item.Meta,{avatar:(0,t.jsx)(B.C,{src:n.user.avatar}),title:(0,t.jsxs)("span",{children:[(0,t.jsx)("a",{className:r().username,children:n.user.name}),"\xA0",(0,t.jsx)("span",{className:r().event,children:s})]}),description:(0,t.jsx)("span",{className:r().datetime,title:n.updatedAt,children:V()(n.updatedAt).fromNow()})})},n.id)};return(0,t.jsxs)("div",{children:[(0,t.jsx)(b.ZP,{title:(0,t.jsx)(ce,{currentTitle:L}),content:(0,t.jsx)(me,{currentUser2:L}),children:(0,t.jsx)(Q.Z,{bodyStyle:{padding:0},bordered:!1,className:r().activeCard,title:"Activity Log",loading:o,children:(0,t.jsx)(H.ZP,{loading:o,renderItem:function(n){return ve(n)},dataSource:I,className:r().activitiesList,size:"large"})})}),(0,t.jsx)(re,{done:C,current:i,visible:M,onDone:F,onCancel:de,onSubmit:ue})]})},oe=(0,G.$j)(function(D){var a=D.Time4line,h=D.loading;return{Time4line:a,loading:h.models.Time4line}})($)}}]);
