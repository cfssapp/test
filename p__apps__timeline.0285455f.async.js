(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[511],{15507:function(U){U.exports={standardList:"standardList___2sn6F",headerInfo:"headerInfo___1CvZH",listContent:"listContent___33Llr",listContentItem:"listContentItem___3sXHk",extraContentSearch:"extraContentSearch___1_GRm",listCard:"listCard___2afOu",standardListForm:"standardListForm___1nPfn",formResult:"formResult___3-IHz",listItemMetaTitle:"listItemMetaTitle___i1Zcs",listItemExtra:"listItemExtra___3cRAl",selfTrigger:"selfTrigger___2jHDW",activitiesList:"activitiesList___2Ea5J",username:"username___3Sr_p",event:"event___2oNE5",pageHeaderContent:"pageHeaderContent___2zJtg",avatar:"avatar___YIl-P",content:"content___1KcY-",contentTitle:"contentTitle___3bM1e",extraContent:"extraContent___GFHF5",statItem:"statItem___3hu1l",members:"members___1lmac",member:"member___1d4jr",projectList:"projectList___1EPvQ",cardTitle:"cardTitle___1nDVV",projectGrid:"projectGrid___1OX0x",projectItemContent:"projectItemContent___geKCL",datetime:"datetime___1fZqL",activeCard:"activeCard___GgIgz",headerList:"headerList___2N4_9",stepDescription:"stepDescription___ez6ur"}},1332:function(U,G,t){"use strict";t.r(G),t.d(G,{Time1line:function(){return $},default:function(){return ct}});var jt=t(58024),B=t(39144),Zt=t(54421),H=t(38272),It=t(94233),W=t(51890),Tt=t(95300),V=t(7277),St=t(98858),j=t(4914),o=t(8870),p=t(2824),v=t(67294),K=t(64335),Q=t(75362),X=t(97363),yt=t(71194),Y=t(57016),pt=t(43185),w=t(94412),Lt=t(57106),k=t(99683),Ft=t(57663),b=t(71577),At=t(9715),L=t(82482),Mt=t(47673),q=t(4107),_=t(30381),J=t.n(_),tt=t(15507),r=t.n(tt),et=t(84391),nt=t(98005),at=t.n(nt),e=t(85893),st=q.Z.TextArea,rt={labelCol:{span:7},wrapperCol:{span:13}},it=function(s){var h=L.Z.useForm(),A=(0,p.Z)(h,1),d=A[0],x=s.done,M=s.visible,g=s.current,Z=s.onDone,I=s.onCancel,P=s.onSubmit;(0,v.useEffect)(function(){d&&!M&&d.resetFields()},[s.visible]),(0,v.useEffect)(function(){g&&d.setFieldsValue((0,o.Z)((0,o.Z)({},g),{},{createdAt:g.createdAt?J()(g.createdAt):null}))},[s.current]);var E=function(){!d||d.submit()},C=[],N=function(u){P&&(console.log("2. imagevalues: "+C),u.imagesupload_id=C,P(u))},O=x?{footer:null,onCancel:Z}:{okText:"Save",onOk:E,onCancel:I},D=function(){if(x)return(0,e.jsx)(k.ZP,{status:"success",title:"Done",extra:(0,e.jsx)(b.Z,{type:"primary",onClick:Z,children:"Okay"}),className:r().formResult});var u={name:"imagefile",action:"https://antapi.pythonanywhere.com/calibration/comment/image/",beforeUpload:function(m){return new Promise(function(i){var f=(m.size/1024/1024).toFixed(1),T;if(f<1)T=1;else if(f<2)T=.6;else if(f<5)T=.4;else return new Promise(function(S,y){y({msg:"Image not larger than 10m"})});new(at())(m,{quality:T,success:function(y){i(y)}})})},headers:{Authorization:"JWT "+localStorage.getItem("access_token")},onChange:function(m){var i=m.file,f=m.fileList;i.status!=="uploading"&&(console.log(i,f),console.log(i.response.id),C.push(i.response.id),console.log("2. imagevalues: "+C))}};return(0,e.jsxs)(L.Z,(0,o.Z)((0,o.Z)({},rt),{},{form:d,onFinish:N,children:[(0,e.jsx)(L.Z.Item,{label:"Upload",name:"uploadimages",children:(0,e.jsx)(w.Z,(0,o.Z)((0,o.Z)({},u),{},{children:(0,e.jsx)(b.Z,{icon:(0,e.jsx)(et.Z,{}),children:"Click to Upload"})}))}),(0,e.jsx)(L.Z.Item,{name:"content",label:"Content",rules:[{message:"Minimum 5 characters",min:5}],children:(0,e.jsx)(st,{rows:4,placeholder:"Minimum 5 characters"})})]}))};return(0,e.jsx)(Y.Z,(0,o.Z)((0,o.Z)({title:x?null:"".concat(g?"Edit":"Write"," a commment..."),className:r().standardListForm,width:640,destroyOnClose:!0,visible:M},O),{},{children:D()}))},lt=it,ot=t(73935),dt=t(1174),$=function(s){var h=(0,v.useRef)(null),A=useRequest(dt.fp),d=A.loading,x=A.data,M=x===void 0?[]:x,g=s.loading,Z=s.dispatch,I=s.Time4line.Time5line,P=(0,v.useState)(!1),E=(0,p.Z)(P,2),C=E[0],N=E[1],O=(0,v.useState)(!1),D=(0,p.Z)(O,2),z=D[0],u=D[1],R=(0,v.useState)(void 0),m=(0,p.Z)(R,2),i=m[0],f=m[1];(0,v.useEffect)(function(){Z({type:"Time4line/fetch",payload:{}})},[1]);var T=function(){u(!0),f(void 0)},S=function(){if(h.current){var n=(0,ot.findDOMNode)(h.current);setTimeout(function(){return n.blur()},0)}},y=function(){S(),N(!1),u(!1)},ut=function(){S(),u(!1)},mt=function(n){var a=localStorage.getItem("topic_id"),l=i?i.id:a;S(),N(!0),Z({type:"Time4line/submit",payload:(0,o.Z)({id:l},n)})},Pt={showSizeChanger:!0,showQuickJumper:!0,pageSize:5},vt=function(n){var a=n.currentUser2,l=a.user?a.user.user_name:a.user;return console.log(l),(0,e.jsx)(K.Z.Consumer,{children:function(gt){var Ct=gt.isMobile;return(0,e.jsxs)(j.Z,{className:r().headerList,size:"small",column:Ct?1:2,children:[(0,e.jsx)(j.Z.Item,{label:"Author",children:l}),(0,e.jsx)(j.Z.Item,{label:"Customer",children:a.customer}),(0,e.jsx)(j.Z.Item,{label:"Instrument",children:a.instrument}),(0,e.jsx)(j.Z.Item,{label:"Updated",children:a.updated})]})}})},ft=function(n){var a=n.currentTitle;return(0,e.jsx)("div",{children:a.certificate_id})},ht=function(n){var a=n.currentExtra;return(0,e.jsxs)("div",{className:r().extraContent,children:[(0,e.jsx)("div",{className:r().statItem,children:(0,e.jsx)(V.Z,{title:"Comment",value:a.post_count})}),(0,e.jsx)("div",{className:r().statItem,children:(0,e.jsx)(V.Z,{title:"View",value:a.views})})]})},xt=function(n){var a=n.template.split(/@\{([^{}]*)\}/gi).map(function(l){return n[l]?(0,e.jsx)("a",{href:n[l].link,children:n[l].name},n[l].name):l});return(0,e.jsx)(H.ZP.Item,{children:(0,e.jsx)(H.ZP.Item.Meta,{avatar:(0,e.jsx)(W.C,{src:n.user.avatar}),title:(0,e.jsxs)("span",{children:[(0,e.jsx)("a",{className:r().username,children:n.user.name}),"\xA0",(0,e.jsx)("span",{className:r().event,children:a})]}),description:(0,e.jsx)("span",{className:r().datetime,title:n.updatedAt,children:J()(n.updatedAt).fromNow()})})},n.id)};return(0,e.jsxs)("div",{children:[(0,e.jsx)(Q.ZP,{title:(0,e.jsx)(ft,{currentTitle:I}),content:(0,e.jsx)(vt,{currentUser2:I}),extraContent:(0,e.jsx)(ht,{currentExtra:I}),children:(0,e.jsx)(B.Z,{bodyStyle:{padding:0},bordered:!1,className:r().activeCard,title:"Activity Log",loading:d,children:(0,e.jsx)(H.ZP,{loading:d,renderItem:function(n){return xt(n)},dataSource:M,className:r().activitiesList,size:"large"})})}),(0,e.jsx)(lt,{done:C,current:i,visible:z,onDone:y,onCancel:ut,onSubmit:mt})]})},ct=(0,X.$j)(function(F){var s=F.Time4line,h=F.loading;return{Time4line:s,loading:h.models.Time4line}})($)}}]);
