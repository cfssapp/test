(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[511],{78127:function(F){F.exports={listContent:"listContent___1RvL2",description:"description___q6Qmu",extra:"extra___2f7BN"}},15507:function(F){F.exports={standardList:"standardList___2sn6F",headerInfo:"headerInfo___1CvZH",listContent:"listContent___33Llr",listContentItem:"listContentItem___3sXHk",extraContentSearch:"extraContentSearch___1_GRm",listCard:"listCard___2afOu",standardListForm:"standardListForm___1nPfn",formResult:"formResult___3-IHz",listItemMetaTitle:"listItemMetaTitle___i1Zcs",listItemExtra:"listItemExtra___3cRAl",selfTrigger:"selfTrigger___2jHDW",activitiesList:"activitiesList___2Ea5J",username:"username___3Sr_p",event:"event___2oNE5",pageHeaderContent:"pageHeaderContent___2zJtg",avatar:"avatar___YIl-P",content:"content___1KcY-",contentTitle:"contentTitle___3bM1e",extraContent:"extraContent___GFHF5",statItem:"statItem___3hu1l",members:"members___1lmac",member:"member___1d4jr",projectList:"projectList___1EPvQ",cardTitle:"cardTitle___1nDVV",projectGrid:"projectGrid___1OX0x",projectItemContent:"projectItemContent___geKCL",datetime:"datetime___1fZqL",activeCard:"activeCard___GgIgz",headerList:"headerList___2N4_9",stepDescription:"stepDescription___ez6ur"}},89148:function(F,V,e){"use strict";e.r(V),e.d(V,{Time1line:function(){return $},default:function(){return Ct}});var Tt=e(58024),K=e(39144),Lt=e(54421),H=e(38272),St=e(57663),O=e(71577),pt=e(95300),J=e(7277),Ft=e(98858),L=e(4914),d=e(8870),P=e(2824),f=e(67294),Q=e(64335),X=e(75362),Y=e(49101),b=e(97363),Pt=e(71194),w=e(57016),Et=e(43185),k=e(94412),Mt=e(57106),q=e(99683),zt=e(9715),E=e(82482),Nt=e(47673),_=e(4107),tt=e(30381),et=e.n(tt),nt=e(15507),C=e.n(nt),at=e(84391),st=e(98005),rt=e.n(st),t=e(85893),it=_.Z.TextArea,ot={labelCol:{span:7},wrapperCol:{span:13}},lt=function(n){var a=E.Z.useForm(),h=(0,P.Z)(a,1),i=h[0],o=n.done,x=n.visible,l=n.current,j=n.onDone,M=n.onCancel,z=n.onSubmit;(0,f.useEffect)(function(){i&&!x&&i.resetFields()},[n.visible]),(0,f.useEffect)(function(){l&&i.setFieldsValue((0,d.Z)((0,d.Z)({},l),{},{createdAt:l.createdAt?et()(l.createdAt):null}))},[n.current]);var N=function(){!i||i.submit()},Z=[],S=function(y){z&&(console.log("2. imagevalues: "+Z),y.imagesupload_id=Z,z(y))},R=o?{footer:null,onCancel:j}:{okText:"Save",onOk:N,onCancel:M},D=function(){if(o)return(0,t.jsx)(q.ZP,{status:"success",title:"Done",extra:(0,t.jsx)(O.Z,{type:"primary",onClick:j,children:"Okay"}),className:C().formResult});var y={name:"imagefile",action:"https://antapi.pythonanywhere.com/calibration/comment/image/",beforeUpload:function(c){return new Promise(function(u){var g=(c.size/1024/1024).toFixed(1),T;if(g<1)T=1;else if(g<2)T=.6;else if(g<5)T=.4;else return new Promise(function(B,p){p({msg:"Image not larger than 10m"})});new(rt())(c,{quality:T,success:function(p){u(p)}})})},headers:{Authorization:"JWT "+localStorage.getItem("access_token")},onChange:function(c){var u=c.file,g=c.fileList;u.status!=="uploading"&&(console.log(u,g),console.log(u.response.id),Z.push(u.response.id),console.log("2. imagevalues: "+Z))}};return(0,t.jsxs)(E.Z,(0,d.Z)((0,d.Z)({},ot),{},{form:i,onFinish:S,children:[(0,t.jsx)(E.Z.Item,{label:"Upload",name:"uploadimages",children:(0,t.jsx)(k.Z,(0,d.Z)((0,d.Z)({},y),{},{children:(0,t.jsx)(O.Z,{icon:(0,t.jsx)(at.Z,{}),children:"Click to Upload"})}))}),(0,t.jsx)(E.Z.Item,{name:"content",label:"Content",rules:[{message:"Minimum 5 characters",min:5}],children:(0,t.jsx)(it,{rows:4,placeholder:"Minimum 5 characters"})})]}))};return(0,t.jsx)(w.Z,(0,d.Z)((0,d.Z)({title:o?null:"".concat(l?"Edit":"Write"," a commment..."),className:C().standardListForm,width:640,destroyOnClose:!0,visible:x},R),{},{children:D()}))},dt=lt,mt=e(73935),Dt=e(94233),ct=e(51890),At=e(49111),ut=e(19650),Ht=e(12968),W=e(62462),vt=e(78127),U=e.n(vt);function ft(m){var n=m.jsonImage,a=n.map(function(h){return(0,t.jsx)(W.Z,{width:50,src:h.imagefile})});return a}function ht(m){var n=m.jsonImage;return n.length===0?null:n.length!==0?(0,t.jsx)(W.Z.PreviewGroup,{children:(0,t.jsx)(ut.Z,{size:"middle",children:(0,t.jsx)(ft,{jsonImage:n})})}):(0,t.jsx)("h1",{children:"Error."})}var xt=function(n){var a=n.data,h=a.content,i=a.name,o=a.created,x=a.user,l=a.href,j=a.image;return(0,t.jsxs)("div",{className:U().listContent,children:[(0,t.jsx)("div",{className:U().description,children:h}),(0,t.jsx)(ht,{jsonImage:j}),(0,t.jsxs)("div",{className:U().extra,children:[(0,t.jsx)(ct.C,{src:x.avatar,size:"small"}),(0,t.jsx)("a",{href:l,children:x.user_name}),(0,t.jsx)("em",{children:o})]})]})},gt=xt,$=function(n){var a=(0,f.useRef)(null),h=n.loading,i=n.dispatch,o=n.Time4line.Time5line,x=(0,f.useState)(!1),l=(0,P.Z)(x,2),j=l[0],M=l[1],z=(0,f.useState)(!1),N=(0,P.Z)(z,2),Z=N[0],S=N[1],R=(0,f.useState)(void 0),D=(0,P.Z)(R,2),I=D[0],y=D[1];(0,f.useEffect)(function(){i({type:"Time4line/fetch",payload:{}})},[1]);var G=function(){S(!0),y(void 0)},c=function(){if(a.current){var r=(0,mt.findDOMNode)(a.current);setTimeout(function(){return r.blur()},0)}},u=function(){c(),M(!1),S(!1)},g=function(){c(),S(!1)},T=function(r){var s=localStorage.getItem("topic_id"),A=I?I.id:s;c(),M(!0),i({type:"Time4line/submit",payload:(0,d.Z)({id:A},r)})},B={showSizeChanger:!0,showQuickJumper:!0,pageSize:5},p=function(r){var s=r.currentUser2,A=s.user?s.user.user_name:s.user;return console.log(A),(0,t.jsx)(Q.Z.Consumer,{children:function(It){var yt=It.isMobile;return(0,t.jsxs)(L.Z,{className:C().headerList,size:"small",column:yt?1:2,children:[(0,t.jsx)(L.Z.Item,{label:"Author",children:A}),(0,t.jsx)(L.Z.Item,{label:"Customer",children:s.customer}),(0,t.jsx)(L.Z.Item,{label:"Instrument",children:s.instrument}),(0,t.jsx)(L.Z.Item,{label:"Updated",children:s.updated})]})}})},jt=function(r){var s=r.currentTitle;return(0,t.jsx)("div",{children:s.certificate_id})},Zt=function(r){var s=r.currentExtra;return(0,t.jsxs)("div",{className:C().extraContent,children:[(0,t.jsx)("div",{className:C().statItem,children:(0,t.jsx)(J.Z,{title:"Comment",value:s.post_count})}),(0,t.jsx)("div",{className:C().statItem,children:(0,t.jsx)(J.Z,{title:"View",value:s.views})})]})};return(0,t.jsxs)("div",{children:[(0,t.jsx)(X.ZP,{title:(0,t.jsx)(jt,{currentTitle:o}),content:(0,t.jsx)(p,{currentUser2:o}),extraContent:(0,t.jsx)(Zt,{currentExtra:o}),children:(0,t.jsxs)(K.Z,{children:[(0,t.jsxs)(O.Z,{type:"dashed",style:{width:"100%",marginBottom:8},onClick:G,ref:a,children:[(0,t.jsx)(Y.Z,{}),"Write a commment..."]}),(0,t.jsx)(H.ZP,{size:"large",loading:h,pagination:B,rowKey:"id",itemLayout:"vertical",dataSource:o.comments,renderItem:function(r){return(0,t.jsxs)(H.ZP.Item,{children:[(0,t.jsx)(H.ZP.Item.Meta,{}),(0,t.jsx)(gt,{data:r})]},r.id)}})]})}),(0,t.jsx)(dt,{done:j,current:I,visible:Z,onDone:u,onCancel:g,onSubmit:T})]})},Ct=(0,b.$j)(function(m){var n=m.Time4line,a=m.loading;return{Time4line:n,loading:a.models.Time4line}})($)}}]);
