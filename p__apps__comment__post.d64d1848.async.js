(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[900],{82844:function(y){y.exports={listContent:"listContent___1x3nG",description:"description___3rQp7",extra:"extra___15ilX"}},75783:function(y){y.exports={standardList:"standardList___12M5M",headerInfo:"headerInfo___3iLzK",listContent:"listContent___1_Cvn",listContentItem:"listContentItem___fvw6z",extraContentSearch:"extraContentSearch___2w4WU",listCard:"listCard___23sqt",standardListForm:"standardListForm___2zy7M",formResult:"formResult___19zr2",listItemMetaTitle:"listItemMetaTitle___34CGT",listItemExtra:"listItemExtra___3vhXh",selfTrigger:"selfTrigger___pplx0",activitiesList:"activitiesList___2buVg",username:"username___1LZL5",event:"event___1zLE0",pageHeaderContent:"pageHeaderContent___1V-0T",avatar:"avatar___SEx8Z",content:"content___3C83U",contentTitle:"contentTitle___eOYxA",extraContent:"extraContent___1gxOE",statItem:"statItem___2aNoO",members:"members___3CjDC",member:"member___1-70y",projectList:"projectList___3UyQd",cardTitle:"cardTitle___1htJM",projectGrid:"projectGrid___M6Vnx",projectItemContent:"projectItemContent___P0j61",datetime:"datetime___1pjFN",activeCard:"activeCard___-tAuo",headerList:"headerList___uOHzJ",stepDescription:"stepDescription___1X6AT"}},61729:function(y,B,e){"use strict";e.r(B),e.d(B,{ToDoList:function(){return V},default:function(){return dt}});var gt=e(58024),$=e(39144),Et=e(54421),M=e(38272),It=e(57663),p=e(71577),Lt=e(95300),H=e(7277),Tt=e(98858),x=e(4914),u=e(8870),Mt=e(59250),J=e(13013),St=e(30887),S=e(99210),At=e(71194),U=e(57016),g=e(2824),c=e(67294),Q=e(64335),W=e(75362),X=e(57254),K=e(49101),Y=e(97363),Dt=e(57106),b=e(99683),Ot=e(9715),A=e(82482),Nt=e(47673),w=e(4107),k=e(30381),q=e.n(k),_=e(75783),m=e.n(_),t=e(85893),tt=w.Z.TextArea,et={labelCol:{span:7},wrapperCol:{span:13}},nt=function(s){var r=A.Z.useForm(),C=(0,g.Z)(r,1),i=C[0],l=s.done,v=s.visible,d=s.current,E=s.onDone,I=s.onCancel,L=s.onSubmit;(0,c.useEffect)(function(){i&&!v&&i.resetFields()},[s.visible]),(0,c.useEffect)(function(){d&&i.setFieldsValue((0,u.Z)((0,u.Z)({},d),{},{createdAt:d.createdAt?q()(d.createdAt):null}))},[s.current]);var T=function(){!i||i.submit()},O=function(Z){L&&L(Z)},f=l?{footer:null,onCancel:E}:{okText:"\u4FDD\u5B58",onOk:T,onCancel:I},N=function(){return l?(0,t.jsx)(b.ZP,{status:"success",title:"\u64CD\u4F5C\u6210\u529F",subTitle:"\u4E00\u7CFB\u5217\u7684\u4FE1\u606F\u63CF\u8FF0\uFF0C\u5F88\u77ED\u540C\u6837\u4E5F\u53EF\u4EE5\u5E26\u6807\u70B9\u3002",extra:(0,t.jsx)(p.Z,{type:"primary",onClick:E,children:"\u77E5\u9053\u4E86"}),className:m().formResult}):(0,t.jsx)(A.Z,(0,u.Z)((0,u.Z)({},et),{},{form:i,onFinish:O,children:(0,t.jsx)(A.Z.Item,{name:"content",label:"content",rules:[{message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u4EA7\u54C1\u63CF\u8FF0\uFF01",min:5}],children:(0,t.jsx)(tt,{rows:4,placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26"})})}))};return(0,t.jsx)(U.Z,(0,u.Z)((0,u.Z)({title:l?null:"".concat(d?"Edit":"Write"," a commment..."),className:m().standardListForm,width:640,destroyOnClose:!0,visible:v},f),{},{children:N()}))},at=nt,st=e(73935),Pt=e(94233),rt=e(51890),ot=e(82844),D=e.n(ot),it=function(s){var r=s.data,C=r.content,i=r.name,l=r.created,v=r.user,d=r.href;return(0,t.jsxs)("div",{className:D().listContent,children:[(0,t.jsx)("div",{className:D().description,children:C}),(0,t.jsxs)("div",{className:D().extra,children:[(0,t.jsx)(rt.C,{src:v.avatar,size:"small"}),(0,t.jsx)("a",{href:d,children:v.user_name}),(0,t.jsx)("em",{children:l})]})]})},lt=it,V=function(s){var r=(0,c.useRef)(null),C=s.loading,i=s.dispatch,l=s.todo2list.todoMList,v=(0,c.useState)(!1),d=(0,g.Z)(v,2),E=d[0],I=d[1],L=(0,c.useState)(!1),T=(0,g.Z)(L,2),O=T[0],f=T[1],N=(0,c.useState)(void 0),j=(0,g.Z)(N,2),Z=j[0],R=j[1];(0,c.useEffect)(function(){i({type:"todo2list/fetch",payload:{}})},[1]);var ut=function(){f(!0),R(void 0)},ct=function(n){f(!0),R(n)},mt=function(n){i({type:"todo2list/submit",payload:{id:n}})},vt=function(n,a){n==="edit"?ct(a):n==="delete"&&U.Z.confirm({title:"\u5220\u9664\u4EFB\u52A1",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u4EFB\u52A1\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){return mt(a.id)}})},zt=function(n){var a=n.item;return(0,t.jsx)(J.Z,{overlay:(0,t.jsxs)(S.Z,{onClick:function(G){var z=G.key;return vt(z,a)},children:[(0,t.jsx)(S.Z.Item,{children:"\u7F16\u8F91"},"edit"),(0,t.jsx)(S.Z.Item,{children:"\u5220\u9664"},"delete")]}),children:(0,t.jsxs)("a",{children:["\u66F4\u591A ",(0,t.jsx)(X.Z,{})]})})},P=function(){if(r.current){var n=(0,st.findDOMNode)(r.current);setTimeout(function(){return n.blur()},0)}},ft=function(){P(),I(!1),f(!1)},xt=function(){P(),f(!1)},ht=function(n){var a=localStorage.getItem("topic_id"),F=Z?Z.id:a;P(),I(!0),i({type:"todo2list/submit",payload:(0,u.Z)({id:F},n)})},Ct={showSizeChanger:!0,showQuickJumper:!0,pageSize:5},jt=function(n){var a=n.currentUser2,F=a.user?a.user.user_name:a.user;return(0,t.jsx)(Q.Z.Consumer,{children:function(z){var yt=z.isMobile;return(0,t.jsxs)(x.Z,{className:m().headerList,size:"small",column:yt?1:2,children:[(0,t.jsx)(x.Z.Item,{label:"Author",children:F}),(0,t.jsx)(x.Z.Item,{label:"Forum",children:a.forum}),(0,t.jsx)(x.Z.Item,{label:"Created",children:a.created}),(0,t.jsx)(x.Z.Item,{label:"Updated",children:a.updated})]})}})},Zt=function(n){var a=n.currentTitle;return(0,t.jsx)("div",{children:a.name})},Ft=function(n){var a=n.currentExtra;return(0,t.jsxs)("div",{className:m().extraContent,children:[(0,t.jsx)("div",{className:m().statItem,children:(0,t.jsx)(H.Z,{title:"Comment",value:a.post_count})}),(0,t.jsx)("div",{className:m().statItem,children:(0,t.jsx)(H.Z,{title:"View",value:a.views})})]})};return(0,t.jsxs)("div",{children:[(0,t.jsx)(W.ZP,{title:(0,t.jsx)(Zt,{currentTitle:l}),content:(0,t.jsx)(jt,{currentUser2:l}),extraContent:(0,t.jsx)(Ft,{currentExtra:l}),children:(0,t.jsxs)($.Z,{children:[(0,t.jsxs)(p.Z,{type:"dashed",style:{width:"100%",marginBottom:8},onClick:ut,ref:r,children:[(0,t.jsx)(K.Z,{}),"Write a commment..."]}),(0,t.jsx)(M.ZP,{size:"large",loading:C,pagination:Ct,rowKey:"id",itemLayout:"vertical",dataSource:l.posts,renderItem:function(n){return(0,t.jsxs)(M.ZP.Item,{extra:(0,t.jsx)("div",{className:m().listItemExtra}),children:[(0,t.jsx)(M.ZP.Item.Meta,{}),(0,t.jsx)(lt,{data:n})]},n.id)}})]})}),(0,t.jsx)(at,{done:E,current:Z,visible:O,onDone:ft,onCancel:xt,onSubmit:ht})]})},dt=(0,Y.$j)(function(h){var s=h.todo2list,r=h.loading;return{todo2list:s,loading:r.models.todo2list}})(V)}}]);
