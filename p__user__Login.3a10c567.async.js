(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{57254:function(L,P,n){"use strict";n.d(P,{Z:function(){return T}});var x=n(67294),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},c=O,d=n(27029),f=function(p,g){return x.createElement(d.Z,Object.assign({},p,{ref:g,icon:c}))};f.displayName="DownOutlined";var T=x.forwardRef(f)},49101:function(L,P,n){"use strict";n.d(P,{Z:function(){return T}});var x=n(67294),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},c=O,d=n(27029),f=function(p,g){return x.createElement(d.Z,Object.assign({},p,{ref:g,icon:c}))};f.displayName="PlusOutlined";var T=x.forwardRef(f)},68408:function(L){L.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},92175:function(L,P,n){"use strict";n.r(P),n.d(P,{default:function(){return ce}});var x=n(34792),O=n(48086),c=n(8870),d=n(3182),f=n(2824),T=n(17462),C=n(94043),p=n.n(C),g=n(67294),Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},J=Y,Q=n(27029),E=function(t,r){return g.createElement(Q.Z,Object.assign({},t,{ref:r,icon:J}))};E.displayName="LockOutlined";var k=g.forwardRef(E),q=n(89366),U=n(88757),A=n(64893),_=["fieldProps","proFieldProps"];function D(){return D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},D.apply(this,arguments)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,a)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H(Object(r),!0).forEach(function(a){ee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e,t){if(e==null)return{};var r=re(e,t),a,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)a=u[o],!(t.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,a)||(r[a]=e[a]))}return r}function re(e,t){if(e==null)return{};var r={},a=Object.keys(e),o,u;for(u=0;u<a.length;u++)o=a[u],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var B="text",ne=(0,A.Z)(function(e){var t=e.fieldProps,r=e.proFieldProps,a=te(e,_);return g.createElement(U.ZP,D({mode:"edit",valueType:B,fieldProps:V(V({},t),{},{onChange:function(){for(var u,S,F=arguments.length,I=new Array(F),b=0;b<F;b++)I[b]=arguments[b];t==null||(u=t.onChange)===null||u===void 0||u.call.apply(u,[t].concat(I)),a==null||(S=a.onChange)===null||S===void 0||S.call.apply(S,[a].concat(I))}})},r))},{valueType:B}),ae=(0,A.Z)(function(e){var t=e.fieldProps,r=e.proFieldProps;return g.createElement(U.ZP,D({mode:"edit",valueType:"password",fieldProps:t},r))},{valueType:B}),$=ne;$.Password=ae;var R=$,se=n(15196),y=n(97363),oe=n(73727),ie=n(36571),le=n(68408),v=n.n(le),s=n(85893),pe=function(t){var r=t.content;return _jsx(_Alert,{style:{marginBottom:24},message:r,type:"error",showIcon:!0})},ue=function(){var t=(0,g.useState)(!1),r=(0,f.Z)(t,2),a=r[0],o=r[1],u=(0,g.useState)({}),S=(0,f.Z)(u,2),F=S[0],I=S[1],b=(0,g.useState)("account"),W=(0,f.Z)(b,2),de=W[0],me=W[1],G=(0,y.tT)("@@initialState"),N=G.initialState,fe=G.setInitialState,M=(0,y.YB)(),ge=function(){var Z=(0,d.Z)(p().mark(function j(){var m,i;return p().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,N==null||(m=N.fetchUserInfo)===null||m===void 0?void 0:m.call(N);case 2:if(i=h.sent,!i){h.next=6;break}return h.next=6,fe(function(z){return(0,c.Z)((0,c.Z)({},z),{},{currentUser:i})});case 6:case"end":return h.stop()}},j)}));return function(){return Z.apply(this,arguments)}}(),ve=function(){var Z=(0,d.Z)(p().mark(function j(m){var i,w,h,z,K,X;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o(!0),l.prev=1,l.next=4,(0,ie.x4)((0,c.Z)((0,c.Z)({},m),{},{type:de}));case 4:if(i=l.sent,console.log(i),console.log(i.access),console.log(i.refresh),console.log(i.id),localStorage.setItem("access_token",i.access),localStorage.setItem("refresh_token",i.refresh),localStorage.setItem("user_id",i.id),i.status!=="ok"){l.next=23;break}return w=M.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),O.default.success(w),l.next=17,ge();case 17:if(y.m8){l.next=19;break}return l.abrupt("return");case 19:return h=y.m8.location.query,z=h,K=z.redirect,y.m8.push(K||"/"),l.abrupt("return");case 23:I(i),l.next=30;break;case 26:l.prev=26,l.t0=l.catch(1),X=M.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),O.default.error(X);case 30:o(!1);case 31:case"end":return l.stop()}},j,null,[[1,26]])}));return function(m){return Z.apply(this,arguments)}}(),he=F.status,Oe=F.type;return(0,s.jsxs)("div",{className:v().container,children:[(0,s.jsx)("div",{className:v().lang,"data-lang":!0,children:y.pD&&(0,s.jsx)(y.pD,{})}),(0,s.jsxs)("div",{className:v().content,children:[(0,s.jsxs)("div",{className:v().top,children:[(0,s.jsx)("div",{className:v().header,children:(0,s.jsxs)(oe.rU,{to:"/",children:[(0,s.jsx)("img",{alt:"logo",className:v().logo,src:"/logo.svg"}),(0,s.jsx)("span",{className:v().title,children:"React"})]})}),(0,s.jsx)("div",{className:v().desc,children:M.formatMessage({id:"pages.layouts.userLayout.title"})})]}),(0,s.jsx)("div",{className:v().main,children:(0,s.jsx)(se.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:M.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(j,m){return m.pop()},submitButtonProps:{loading:a,size:"large",style:{width:"100%"}}},onFinish:function(){var Z=(0,d.Z)(p().mark(function j(m){return p().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:ve(m);case 1:case"end":return w.stop()}},j)}));return function(j){return Z.apply(this,arguments)}}(),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R,{name:"user_name",fieldProps:{size:"large",prefix:(0,s.jsx)(q.Z,{className:v().prefixIcon})},placeholder:M.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: guest"}),rules:[{required:!0,message:(0,s.jsx)(y._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,s.jsx)(R.Password,{name:"password",fieldProps:{size:"large",prefix:(0,s.jsx)(k,{className:v().prefixIcon})},placeholder:M.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: guest"}),rules:[{required:!0,message:(0,s.jsx)(y._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]})})})]})]})},ce=ue},97435:function(L,P){"use strict";function n(x,O){for(var c=Object.assign({},x),d=0;d<O.length;d+=1){var f=O[d];delete c[f]}return c}P.Z=n}}]);
