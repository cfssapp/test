(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[511],{15507:function(G){G.exports={standardList:"standardList___2sn6F",headerInfo:"headerInfo___1CvZH",listContent:"listContent___33Llr",listContentItem:"listContentItem___3sXHk",extraContentSearch:"extraContentSearch___1_GRm",listCard:"listCard___2afOu",standardListForm:"standardListForm___1nPfn",formResult:"formResult___3-IHz",listItemMetaTitle:"listItemMetaTitle___i1Zcs",listItemExtra:"listItemExtra___3cRAl",selfTrigger:"selfTrigger___2jHDW",activitiesList:"activitiesList___2Ea5J",username:"username___3Sr_p",event:"event___2oNE5",pageHeaderContent:"pageHeaderContent___2zJtg",avatar:"avatar___YIl-P",content:"content___1KcY-",contentTitle:"contentTitle___3bM1e",extraContent:"extraContent___GFHF5",statItem:"statItem___3hu1l",members:"members___1lmac",member:"member___1d4jr",projectList:"projectList___1EPvQ",cardTitle:"cardTitle___1nDVV",projectGrid:"projectGrid___1OX0x",projectItemContent:"projectItemContent___geKCL",datetime:"datetime___1fZqL",activeCard:"activeCard___GgIgz",headerList:"headerList___2N4_9",stepDescription:"stepDescription___ez6ur"}},1332:function(G,$,e){"use strict";e.r($),e.d($,{Time1line:function(){return W},default:function(){return ve}});var je=e(58024),X=e(39144),Te=e(54421),O=e(38272),Ze=e(94233),J=e(51890),ye=e(71748),Y=e(33860),o=e(8870),I=e(2824),b=e(3182),w=e(94043),V=e.n(w),m=e(67294),k=e(75362),B=e(97363),Se=e(71194),q=e(57016),Ie=e(43185),_=e(94412),pe=e(57106),ee=e(99683),Le=e(57663),Q=e(71577),Fe=e(9715),p=e(82482),Pe=e(47673),te=e(4107),ne=e(30381),E=e.n(ne),ae=e(15507),i=e.n(ae),re=e(84391),se=e(98005),ie=e.n(se),t=e(85893),le=te.Z.TextArea,oe={labelCol:{span:7},wrapperCol:{span:13}},de=function(a){var f=p.Z.useForm(),F=(0,I.Z)(f,1),d=F[0],h=a.done,P=a.visible,g=a.current,T=a.onDone,A=a.onCancel,M=a.onSubmit;(0,m.useEffect)(function(){d&&!P&&d.resetFields()},[a.visible]),(0,m.useEffect)(function(){g&&d.setFieldsValue((0,o.Z)((0,o.Z)({},g),{},{createdAt:g.createdAt?E()(g.createdAt):null}))},[a.current]);var N=function(){!d||d.submit()},C=[],D=function(c){M&&(console.log("2. imagevalues: "+C),c.imagesupload_id=C,M(c))},R=h?{footer:null,onCancel:T}:{okText:"Save",onOk:N,onCancel:A},H=function(){if(h)return(0,t.jsx)(ee.ZP,{status:"success",title:"Done",extra:(0,t.jsx)(Q.Z,{type:"primary",onClick:T,children:"Okay"}),className:i().formResult});var c={name:"imagefile",action:"https://antapi.pythonanywhere.com/calibration/comment/image/",beforeUpload:function(u){return new Promise(function(l){var v=(u.size/1024/1024).toFixed(1),Z;if(v<1)Z=1;else if(v<2)Z=.6;else if(v<5)Z=.4;else return new Promise(function(y,S){S({msg:"Image not larger than 10m"})});new(ie())(u,{quality:Z,success:function(S){l(S)}})})},headers:{Authorization:"JWT "+localStorage.getItem("access_token")},onChange:function(u){var l=u.file,v=u.fileList;l.status!=="uploading"&&(console.log(l,v),console.log(l.response.id),C.push(l.response.id),console.log("2. imagevalues: "+C))}};return(0,t.jsxs)(p.Z,(0,o.Z)((0,o.Z)({},oe),{},{form:d,onFinish:D,children:[(0,t.jsx)(p.Z.Item,{label:"Upload",name:"uploadimages",children:(0,t.jsx)(_.Z,(0,o.Z)((0,o.Z)({},c),{},{children:(0,t.jsx)(Q.Z,{icon:(0,t.jsx)(re.Z,{}),children:"Click to Upload"})}))}),(0,t.jsx)(p.Z.Item,{name:"content",label:"Content",rules:[{message:"Minimum 5 characters",min:5}],children:(0,t.jsx)(le,{rows:4,placeholder:"Minimum 5 characters"})})]}))};return(0,t.jsx)(q.Z,(0,o.Z)((0,o.Z)({title:h?null:"".concat(g?"Edit":"Write"," a commment..."),className:i().standardListForm,width:640,destroyOnClose:!0,visible:P},R),{},{children:H()}))},ce=de,ue=e(73935),me=e(1174),W=function(a){var f=(0,m.useRef)(null),F=(0,B.QT)(function(){var s=(0,b.Z)(V().mark(function n(r){var x;return V().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,me.fp)(r);case 2:return x=j.sent,j.abrupt("return",x);case 4:case"end":return j.stop()}},n)}));return function(n){return s.apply(this,arguments)}}(),{formatResult:function(n){return n}}),d=F.loading,h=F.data,P=h===void 0?[]:h,g=a.loading,T=a.dispatch,A=a.Time4line.Time5line,M=(0,m.useState)(!1),N=(0,I.Z)(M,2),C=N[0],D=N[1],R=(0,m.useState)(!1),H=(0,I.Z)(R,2),z=H[0],c=H[1],U=(0,m.useState)(void 0),u=(0,I.Z)(U,2),l=u[0],v=u[1];(0,m.useEffect)(function(){T({type:"Time4line/fetch",payload:{}})},[1]);var Z=function(){c(!0),v(void 0)},y=function(){if(f.current){var n=(0,ue.findDOMNode)(f.current);setTimeout(function(){return n.blur()},0)}},S=function(){y(),D(!1),c(!1)},fe=function(){y(),c(!1)},he=function(n){var r=localStorage.getItem("topic_id"),x=l?l.id:r;y(),D(!0),T({type:"Time4line/submit",payload:(0,o.Z)({id:x},n)})},Ae={showSizeChanger:!0,showQuickJumper:!0,pageSize:5};E().locale("en");var ge=function(n){var r=n.currentTitle;return(0,t.jsx)("div",{children:"Timeline"})},Ce=function(n){var r=n.currentUser2,x=r&&Object.keys(r).length;if(!x)return(0,t.jsx)(Y.Z,{avatar:!0,paragraph:{rows:1},active:!0});var K=r&&r.user_name;return console.log(K),(0,t.jsxs)("div",{className:i().pageHeaderContent,children:[(0,t.jsx)("div",{className:i().avatar,children:(0,t.jsx)(J.C,{size:"large",src:r.avatar})}),(0,t.jsxs)("div",{className:i().content,children:[(0,t.jsx)("div",{className:i().contentTitle,children:r.user_name}),(0,t.jsx)("div",{children:"admin@admin.com"})]})]})},xe=function(n){return(0,t.jsx)(O.ZP.Item,{children:(0,t.jsx)(O.ZP.Item.Meta,{avatar:(0,t.jsx)(J.C,{src:n.user.avatar}),title:(0,t.jsxs)("span",{children:[(0,t.jsx)("a",{className:i().username,children:n.user.user_name}),"\xA0"]}),description:(0,t.jsx)("span",{className:i().datetime,title:n.created,children:E()(n.created).fromNow()})})},n.id)};return(0,t.jsxs)("div",{children:[(0,t.jsx)(k.ZP,{title:(0,t.jsx)(ge,{currentTitle:A}),content:(0,t.jsx)(Ce,{currentUser2:A}),children:(0,t.jsx)(X.Z,{bodyStyle:{padding:0},bordered:!1,className:i().activeCard,title:"Activity Log",loading:d,children:(0,t.jsx)(O.ZP,{loading:d,renderItem:function(n){return xe(n)},dataSource:P,className:i().activitiesList,size:"large"})})}),(0,t.jsx)(ce,{done:C,current:l,visible:z,onDone:S,onCancel:fe,onSubmit:he})]})},ve=(0,B.$j)(function(L){var a=L.Time4line,f=L.loading;return{Time4line:a,loading:f.models.Time4line}})(W)}}]);
