(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[511],{15507:function(R){R.exports={standardList:"standardList___2sn6F",headerInfo:"headerInfo___1CvZH",listContent:"listContent___33Llr",listContentItem:"listContentItem___3sXHk",extraContentSearch:"extraContentSearch___1_GRm",listCard:"listCard___2afOu",standardListForm:"standardListForm___1nPfn",formResult:"formResult___3-IHz",listItemMetaTitle:"listItemMetaTitle___i1Zcs",listItemExtra:"listItemExtra___3cRAl",selfTrigger:"selfTrigger___2jHDW",activitiesList:"activitiesList___2Ea5J",username:"username___3Sr_p",event:"event___2oNE5",pageHeaderContent:"pageHeaderContent___2zJtg",avatar:"avatar___YIl-P",content:"content___1KcY-",contentTitle:"contentTitle___3bM1e",extraContent:"extraContent___GFHF5",statItem:"statItem___3hu1l",members:"members___1lmac",member:"member___1d4jr",projectList:"projectList___1EPvQ",cardTitle:"cardTitle___1nDVV",projectGrid:"projectGrid___1OX0x",projectItemContent:"projectItemContent___geKCL",datetime:"datetime___1fZqL",activeCard:"activeCard___GgIgz",headerList:"headerList___2N4_9",stepDescription:"stepDescription___ez6ur"}},1332:function(R,U,t){"use strict";t.r(U),t.d(U,{Time1line:function(){return Q},default:function(){return ct}});var jt=t(58024),W=t(39144),Zt=t(54421),z=t(38272),Tt=t(94233),K=t(51890),It=t(95300),G=t(7277),St=t(98858),V=t(4914),o=t(8870),y=t(2824),v=t(67294),X=t(64335),Y=t(75362),J=t(97363),yt=t(71194),b=t(57016),pt=t(43185),w=t(94412),Lt=t(57106),k=t(99683),Ft=t(57663),$=t(71577),At=t(9715),p=t(82482),Mt=t(47673),q=t(4107),_=t(30381),B=t.n(_),tt=t(15507),r=t.n(tt),et=t(84391),nt=t(98005),at=t.n(nt),e=t(85893),st=q.Z.TextArea,rt={labelCol:{span:7},wrapperCol:{span:13}},it=function(a){var h=p.Z.useForm(),F=(0,y.Z)(h,1),d=F[0],g=a.done,A=a.visible,x=a.current,j=a.onDone,Z=a.onCancel,M=a.onSubmit;(0,v.useEffect)(function(){d&&!A&&d.resetFields()},[a.visible]),(0,v.useEffect)(function(){x&&d.setFieldsValue((0,o.Z)((0,o.Z)({},x),{},{createdAt:x.createdAt?B()(x.createdAt):null}))},[a.current]);var P=function(){!d||d.submit()},C=[],E=function(u){M&&(console.log("2. imagevalues: "+C),u.imagesupload_id=C,M(u))},H=g?{footer:null,onCancel:j}:{okText:"Save",onOk:P,onCancel:Z},N=function(){if(g)return(0,e.jsx)(k.ZP,{status:"success",title:"Done",extra:(0,e.jsx)($.Z,{type:"primary",onClick:j,children:"Okay"}),className:r().formResult});var u={name:"imagefile",action:"https://antapi.pythonanywhere.com/calibration/comment/image/",beforeUpload:function(m){return new Promise(function(i){var f=(m.size/1024/1024).toFixed(1),T;if(f<1)T=1;else if(f<2)T=.6;else if(f<5)T=.4;else return new Promise(function(I,S){S({msg:"Image not larger than 10m"})});new(at())(m,{quality:T,success:function(S){i(S)}})})},headers:{Authorization:"JWT "+localStorage.getItem("access_token")},onChange:function(m){var i=m.file,f=m.fileList;i.status!=="uploading"&&(console.log(i,f),console.log(i.response.id),C.push(i.response.id),console.log("2. imagevalues: "+C))}};return(0,e.jsxs)(p.Z,(0,o.Z)((0,o.Z)({},rt),{},{form:d,onFinish:E,children:[(0,e.jsx)(p.Z.Item,{label:"Upload",name:"uploadimages",children:(0,e.jsx)(w.Z,(0,o.Z)((0,o.Z)({},u),{},{children:(0,e.jsx)($.Z,{icon:(0,e.jsx)(et.Z,{}),children:"Click to Upload"})}))}),(0,e.jsx)(p.Z.Item,{name:"content",label:"Content",rules:[{message:"Minimum 5 characters",min:5}],children:(0,e.jsx)(st,{rows:4,placeholder:"Minimum 5 characters"})})]}))};return(0,e.jsx)(b.Z,(0,o.Z)((0,o.Z)({title:g?null:"".concat(x?"Edit":"Write"," a commment..."),className:r().standardListForm,width:640,destroyOnClose:!0,visible:A},H),{},{children:N()}))},lt=it,ot=t(73935),dt=t(1174),Q=function(a){var h=(0,v.useRef)(null),F=(0,J.QT)(dt.fp),d=F.loading,g=F.data,A=g===void 0?[]:g,x=a.loading,j=a.dispatch,Z=a.Time4line.Time5line,M=(0,v.useState)(!1),P=(0,y.Z)(M,2),C=P[0],E=P[1],H=(0,v.useState)(!1),N=(0,y.Z)(H,2),D=N[0],u=N[1],O=(0,v.useState)(void 0),m=(0,y.Z)(O,2),i=m[0],f=m[1];(0,v.useEffect)(function(){j({type:"Time4line/fetch",payload:{}})},[1]);var T=function(){u(!0),f(void 0)},I=function(){if(h.current){var n=(0,ot.findDOMNode)(h.current);setTimeout(function(){return n.blur()},0)}},S=function(){I(),E(!1),u(!1)},ut=function(){I(),u(!1)},mt=function(n){var s=localStorage.getItem("topic_id"),l=i?i.id:s;I(),E(!0),j({type:"Time4line/submit",payload:(0,o.Z)({id:l},n)})},Pt={showSizeChanger:!0,showQuickJumper:!0,pageSize:5},vt=function(n){var s=n.currentUser2,l=s&&s.user_name;return console.log(l),(0,e.jsx)(X.Z.Consumer,{children:function(xt){var Ct=xt.isMobile;return(0,e.jsx)(V.Z,{className:r().headerList,size:"small",column:Ct?1:2,children:(0,e.jsx)(V.Z.Item,{label:"Author",children:l})})}})},ft=function(n){var s=n.currentTitle;return(0,e.jsx)("div",{children:s.user_name})},ht=function(n){var s=n.currentExtra;return(0,e.jsxs)("div",{className:r().extraContent,children:[(0,e.jsx)("div",{className:r().statItem,children:(0,e.jsx)(G.Z,{title:"Comment",value:s.post_count})}),(0,e.jsx)("div",{className:r().statItem,children:(0,e.jsx)(G.Z,{title:"View",value:s.views})})]})},gt=function(n){var s=n.template.split(/@\{([^{}]*)\}/gi).map(function(l){return n[l]?(0,e.jsx)("a",{href:n[l].link,children:n[l].name},n[l].name):l});return(0,e.jsx)(z.ZP.Item,{children:(0,e.jsx)(z.ZP.Item.Meta,{avatar:(0,e.jsx)(K.C,{src:n.user.avatar}),title:(0,e.jsxs)("span",{children:[(0,e.jsx)("a",{className:r().username,children:n.user.name}),"\xA0",(0,e.jsx)("span",{className:r().event,children:s})]}),description:(0,e.jsx)("span",{className:r().datetime,title:n.updatedAt,children:B()(n.updatedAt).fromNow()})})},n.id)};return(0,e.jsxs)("div",{children:[(0,e.jsx)(Y.ZP,{title:(0,e.jsx)(ft,{currentTitle:Z}),content:(0,e.jsx)(vt,{currentUser2:Z}),extraContent:(0,e.jsx)(ht,{currentExtra:Z}),children:(0,e.jsx)(W.Z,{bodyStyle:{padding:0},bordered:!1,className:r().activeCard,title:"Activity Log",loading:d,children:(0,e.jsx)(z.ZP,{loading:d,renderItem:function(n){return gt(n)},dataSource:A,className:r().activitiesList,size:"large"})})}),(0,e.jsx)(lt,{done:C,current:i,visible:D,onDone:S,onCancel:ut,onSubmit:mt})]})},ct=(0,J.$j)(function(L){var a=L.Time4line,h=L.loading;return{Time4line:a,loading:h.models.Time4line}})(Q)}}]);
