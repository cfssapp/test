(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[511],{15507:function(R){R.exports={standardList:"standardList___2sn6F",headerInfo:"headerInfo___1CvZH",listContent:"listContent___33Llr",listContentItem:"listContentItem___3sXHk",extraContentSearch:"extraContentSearch___1_GRm",listCard:"listCard___2afOu",standardListForm:"standardListForm___1nPfn",formResult:"formResult___3-IHz",listItemMetaTitle:"listItemMetaTitle___i1Zcs",listItemExtra:"listItemExtra___3cRAl",selfTrigger:"selfTrigger___2jHDW",activitiesList:"activitiesList___2Ea5J",username:"username___3Sr_p",event:"event___2oNE5",pageHeaderContent:"pageHeaderContent___2zJtg",avatar:"avatar___YIl-P",content:"content___1KcY-",contentTitle:"contentTitle___3bM1e",extraContent:"extraContent___GFHF5",statItem:"statItem___3hu1l",members:"members___1lmac",member:"member___1d4jr",projectList:"projectList___1EPvQ",cardTitle:"cardTitle___1nDVV",projectGrid:"projectGrid___1OX0x",projectItemContent:"projectItemContent___geKCL",datetime:"datetime___1fZqL",activeCard:"activeCard___GgIgz",headerList:"headerList___2N4_9",stepDescription:"stepDescription___ez6ur"}},1332:function(R,U,e){"use strict";e.r(U),e.d(U,{Time1line:function(){return B},default:function(){return oe}});var he=e(58024),Q=e(39144),ge=e(54421),z=e(38272),xe=e(94233),G=e(51890),Ce=e(71748),W=e(33860),l=e(8870),y=e(2824),v=e(67294),b=e(75362),J=e(97363),je=e(71194),K=e(57016),Te=e(43185),X=e(94412),Ze=e(57106),Y=e(99683),Se=e(57663),V=e(71577),ye=e(9715),p=e(82482),pe=e(47673),w=e(4107),k=e(30381),$=e.n(k),q=e(15507),r=e.n(q),_=e(84391),ee=e(98005),te=e.n(ee),t=e(85893),ne=w.Z.TextArea,ae={labelCol:{span:7},wrapperCol:{span:13}},se=function(a){var h=p.Z.useForm(),L=(0,y.Z)(h,1),o=L[0],g=a.done,F=a.visible,x=a.current,j=a.onDone,A=a.onCancel,P=a.onSubmit;(0,v.useEffect)(function(){o&&!F&&o.resetFields()},[a.visible]),(0,v.useEffect)(function(){x&&o.setFieldsValue((0,l.Z)((0,l.Z)({},x),{},{createdAt:x.createdAt?$()(x.createdAt):null}))},[a.current]);var N=function(){!o||o.submit()},C=[],M=function(c){P&&(console.log("2. imagevalues: "+C),c.imagesupload_id=C,P(c))},O=g?{footer:null,onCancel:j}:{okText:"Save",onOk:N,onCancel:A},D=function(){if(g)return(0,t.jsx)(Y.ZP,{status:"success",title:"Done",extra:(0,t.jsx)(V.Z,{type:"primary",onClick:j,children:"Okay"}),className:r().formResult});var c={name:"imagefile",action:"https://antapi.pythonanywhere.com/calibration/comment/image/",beforeUpload:function(u){return new Promise(function(i){var f=(u.size/1024/1024).toFixed(1),T;if(f<1)T=1;else if(f<2)T=.6;else if(f<5)T=.4;else return new Promise(function(Z,S){S({msg:"Image not larger than 10m"})});new(te())(u,{quality:T,success:function(S){i(S)}})})},headers:{Authorization:"JWT "+localStorage.getItem("access_token")},onChange:function(u){var i=u.file,f=u.fileList;i.status!=="uploading"&&(console.log(i,f),console.log(i.response.id),C.push(i.response.id),console.log("2. imagevalues: "+C))}};return(0,t.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},ae),{},{form:o,onFinish:M,children:[(0,t.jsx)(p.Z.Item,{label:"Upload",name:"uploadimages",children:(0,t.jsx)(X.Z,(0,l.Z)((0,l.Z)({},c),{},{children:(0,t.jsx)(V.Z,{icon:(0,t.jsx)(_.Z,{}),children:"Click to Upload"})}))}),(0,t.jsx)(p.Z.Item,{name:"content",label:"Content",rules:[{message:"Minimum 5 characters",min:5}],children:(0,t.jsx)(ne,{rows:4,placeholder:"Minimum 5 characters"})})]}))};return(0,t.jsx)(K.Z,(0,l.Z)((0,l.Z)({title:g?null:"".concat(x?"Edit":"Write"," a commment..."),className:r().standardListForm,width:640,destroyOnClose:!0,visible:F},O),{},{children:D()}))},re=se,ie=e(73935),le=e(1174),B=function(a){var h=(0,v.useRef)(null),L=(0,J.QT)(le.fp),o=L.loading,g=L.data,F=g===void 0?[]:g,x=a.loading,j=a.dispatch,A=a.Time4line.Time5line,P=(0,v.useState)(!1),N=(0,y.Z)(P,2),C=N[0],M=N[1],O=(0,v.useState)(!1),D=(0,y.Z)(O,2),H=D[0],c=D[1],E=(0,v.useState)(void 0),u=(0,y.Z)(E,2),i=u[0],f=u[1];(0,v.useEffect)(function(){j({type:"Time4line/fetch",payload:{}})},[1]);var T=function(){c(!0),f(void 0)},Z=function(){if(h.current){var n=(0,ie.findDOMNode)(h.current);setTimeout(function(){return n.blur()},0)}},S=function(){Z(),M(!1),c(!1)},de=function(){Z(),c(!1)},ce=function(n){var s=localStorage.getItem("topic_id"),d=i?i.id:s;Z(),M(!0),j({type:"Time4line/submit",payload:(0,l.Z)({id:d},n)})},Ie={showSizeChanger:!0,showQuickJumper:!0,pageSize:5},ue=function(n){var s=n.currentTitle;return(0,t.jsx)("div",{children:s.user_name})},me=function(n){var s=n.currentUser2,d=s&&Object.keys(s).length;if(!d)return(0,t.jsx)(W.Z,{avatar:!0,paragraph:{rows:1},active:!0});var fe=s&&s.user_name;return console.log(fe),(0,t.jsxs)("div",{className:r().pageHeaderContent,children:[(0,t.jsx)("div",{className:r().avatar,children:(0,t.jsx)(G.C,{size:"large",src:s.avatar})}),(0,t.jsx)("div",{className:r().content,children:(0,t.jsx)("div",{className:r().contentTitle,children:s.user_name})})]})},ve=function(n){var s=n.template.split(/@\{([^{}]*)\}/gi).map(function(d){return n[d]?(0,t.jsx)("a",{href:n[d].link,children:n[d].name},n[d].name):d});return(0,t.jsx)(z.ZP.Item,{children:(0,t.jsx)(z.ZP.Item.Meta,{avatar:(0,t.jsx)(G.C,{src:n.user.avatar}),title:(0,t.jsxs)("span",{children:[(0,t.jsx)("a",{className:r().username,children:n.user.name}),"\xA0",(0,t.jsx)("span",{className:r().event,children:s})]}),description:(0,t.jsx)("span",{className:r().datetime,title:n.updatedAt,children:$()(n.updatedAt).fromNow()})})},n.id)};return(0,t.jsxs)("div",{children:[(0,t.jsx)(b.ZP,{title:(0,t.jsx)(ue,{currentTitle:A}),content:(0,t.jsx)(me,{currentUser2:A}),children:(0,t.jsx)(Q.Z,{bodyStyle:{padding:0},bordered:!1,className:r().activeCard,title:"Activity Log",loading:o,children:(0,t.jsx)(z.ZP,{loading:o,renderItem:function(n){return ve(n)},dataSource:F,className:r().activitiesList,size:"large"})})}),(0,t.jsx)(re,{done:C,current:i,visible:H,onDone:S,onCancel:de,onSubmit:ce})]})},oe=(0,J.$j)(function(I){var a=I.Time4line,h=I.loading;return{Time4line:a,loading:h.models.Time4line}})(B)}}]);
