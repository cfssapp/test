(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[785],{73947:function(F){F.exports={listContent:"listContent___3vedS",description:"description___3PN_4",extra:"extra___1NSLt"}},98250:function(F){F.exports={standardList:"standardList___kz2pc",headerInfo:"headerInfo___2cRCO",listContent:"listContent___LdtIk",listContentItem:"listContentItem___3NLFa",extraContentSearch:"extraContentSearch___1hRjc",listCard:"listCard___1nD9x",standardListForm:"standardListForm___Aq-Np",formResult:"formResult___2xNbB",listItemMetaTitle:"listItemMetaTitle___2I_Vl",listItemExtra:"listItemExtra___y5uWL",selfTrigger:"selfTrigger___9x7cu",activitiesList:"activitiesList___1qnhj",username:"username___3PmLk",event:"event___27cR9",pageHeaderContent:"pageHeaderContent___1kD8-",avatar:"avatar___1_XIl",content:"content___2OTuT",contentTitle:"contentTitle___1Ifis",extraContent:"extraContent___1AWND",statItem:"statItem___X4Kpk",members:"members___2MGoO",member:"member___17If9",projectList:"projectList___3aP5Q",cardTitle:"cardTitle___9n-it",projectGrid:"projectGrid___2FO9w",projectItemContent:"projectItemContent___2TSFf",datetime:"datetime___1nNWy",activeCard:"activeCard___2O5-J",headerList:"headerList___1unww",stepDescription:"stepDescription___3VOaI"}},2235:function(F,V,e){"use strict";e.r(V),e.d(V,{Current1Cert:function(){return J},default:function(){return jt}});var Lt=e(58024),K=e(39144),St=e(54421),U=e(38272),pt=e(57663),z=e(71577),Tt=e(95300),G=e(7277),Ft=e(98858),S=e(4914),d=e(8870),P=e(2824),f=e(67294),Q=e(64335),X=e(75362),Y=e(49101),b=e(97363),Pt=e(71194),w=e(57016),Nt=e(43185),k=e(94412),Mt=e(57106),q=e(99683),Ot=e(9715),N=e(82482),Dt=e(47673),_=e(4107),tt=e(30381),et=e.n(tt),nt=e(98250),j=e.n(nt),at=e(84391),rt=e(98005),st=e.n(rt),t=e(85893),ot=_.Z.TextArea,it={labelCol:{span:7},wrapperCol:{span:13}},lt=function(n){var a=N.Z.useForm(),C=(0,P.Z)(a,1),o=C[0],i=n.done,h=n.visible,l=n.current,g=n.onDone,M=n.onCancel,O=n.onSubmit;(0,f.useEffect)(function(){o&&!h&&o.resetFields()},[n.visible]),(0,f.useEffect)(function(){l&&o.setFieldsValue((0,d.Z)((0,d.Z)({},l),{},{createdAt:l.createdAt?et()(l.createdAt):null}))},[n.current]);var D=function(){!o||o.submit()},Z=[],p=function(y){O&&(console.log("2. imagevalues: "+Z),y.imagesupload_id=Z,O(y))},H=i?{footer:null,onCancel:g}:{okText:"Save",onOk:D,onCancel:M},E=function(){if(i)return(0,t.jsx)(q.ZP,{status:"success",title:"Done",extra:(0,t.jsx)(z.Z,{type:"primary",onClick:g,children:"Okay"}),className:j().formResult});var y={name:"imagefile",action:"https://antapi.pythonanywhere.com/calibration/comment/image/",beforeUpload:function(u){return new Promise(function(c){var x=(u.size/1024/1024).toFixed(1),L;if(x<1)L=1;else if(x<2)L=.6;else if(x<5)L=.4;else return new Promise(function(B,T){T({msg:"Image not larger than 10m"})});new(st())(u,{quality:L,success:function(T){c(T)}})})},headers:{Authorization:"JWT "+localStorage.getItem("access_token")},onChange:function(u){var c=u.file,x=u.fileList;c.status!=="uploading"&&(console.log(c,x),console.log(c.response.id),Z.push(c.response.id),console.log("2. imagevalues: "+Z))}};return(0,t.jsxs)(N.Z,(0,d.Z)((0,d.Z)({},it),{},{form:o,onFinish:p,children:[(0,t.jsx)(N.Z.Item,{label:"Upload",name:"uploadimages",children:(0,t.jsx)(k.Z,(0,d.Z)((0,d.Z)({},y),{},{children:(0,t.jsx)(z.Z,{icon:(0,t.jsx)(at.Z,{}),children:"Click to Upload"})}))}),(0,t.jsx)(N.Z.Item,{name:"content",label:"Content",rules:[{message:"Minimum 5 characters",min:5}],children:(0,t.jsx)(ot,{rows:4,placeholder:"Minimum 5 characters"})})]}))};return(0,t.jsx)(w.Z,(0,d.Z)((0,d.Z)({title:i?null:"".concat(l?"Edit":"Write"," a commment..."),className:j().standardListForm,width:640,destroyOnClose:!0,visible:h},H),{},{children:E()}))},dt=lt,mt=e(73935),Et=e(94233),ut=e(51890),At=e(49111),ct=e(19650),Ut=e(12968),$=e(62462),vt=e(73947),R=e.n(vt);function ft(m){var n=m.jsonImage,a=n.map(function(C){return(0,t.jsx)($.Z,{width:50,src:C.imagefile})});return a}function Ct(m){var n=m.jsonImage;return n.length===0?null:n.length!==0?(0,t.jsx)($.Z.PreviewGroup,{children:(0,t.jsx)(ct.Z,{size:"middle",children:(0,t.jsx)(ft,{jsonImage:n})})}):(0,t.jsx)("h1",{children:"Error."})}var ht=function(n){var a=n.data,C=a.content,o=a.name,i=a.created,h=a.user,l=a.href,g=a.image;return(0,t.jsxs)("div",{className:R().listContent,children:[(0,t.jsx)("div",{className:R().description,children:C}),(0,t.jsx)(Ct,{jsonImage:g}),(0,t.jsxs)("div",{className:R().extra,children:[(0,t.jsx)(ut.C,{src:h.avatar,size:"small"}),(0,t.jsx)("a",{href:l,children:h.user_name}),(0,t.jsx)("em",{children:i})]})]})},xt=ht,J=function(n){var a=(0,f.useRef)(null),C=n.loading,o=n.dispatch,i=n.Current4Cert.Current5Cert,h=(0,f.useState)(!1),l=(0,P.Z)(h,2),g=l[0],M=l[1],O=(0,f.useState)(!1),D=(0,P.Z)(O,2),Z=D[0],p=D[1],H=(0,f.useState)(void 0),E=(0,P.Z)(H,2),I=E[0],y=E[1];(0,f.useEffect)(function(){o({type:"Current4Cert/fetch",payload:{}})},[1]);var W=function(){p(!0),y(void 0)},u=function(){if(a.current){var s=(0,mt.findDOMNode)(a.current);setTimeout(function(){return s.blur()},0)}},c=function(){u(),M(!1),p(!1)},x=function(){u(),p(!1)},L=function(s){var r=localStorage.getItem("topic_id"),A=I?I.id:r;u(),M(!0),o({type:"Current4Cert/submit",payload:(0,d.Z)({id:A},s)})},B={showSizeChanger:!0,showQuickJumper:!0,pageSize:5},T=function(s){var r=s.currentUser2,A=r.user?r.user.user_name:r.user;return console.log(A),(0,t.jsx)(Q.Z.Consumer,{children:function(It){var yt=It.isMobile;return(0,t.jsxs)(S.Z,{className:j().headerList,size:"small",column:yt?1:2,children:[(0,t.jsx)(S.Z.Item,{label:"Author",children:A}),(0,t.jsx)(S.Z.Item,{label:"Customer",children:r.customer}),(0,t.jsx)(S.Z.Item,{label:"Instrument",children:r.instrument}),(0,t.jsx)(S.Z.Item,{label:"Updated",children:r.updated})]})}})},gt=function(s){var r=s.currentTitle;return(0,t.jsx)("div",{children:r.certificate_id})},Zt=function(s){var r=s.currentExtra;return(0,t.jsxs)("div",{className:j().extraContent,children:[(0,t.jsx)("div",{className:j().statItem,children:(0,t.jsx)(G.Z,{title:"Comment",value:r.post_count})}),(0,t.jsx)("div",{className:j().statItem,children:(0,t.jsx)(G.Z,{title:"View",value:r.views})})]})};return(0,t.jsxs)("div",{children:[(0,t.jsx)(X.ZP,{title:(0,t.jsx)(gt,{currentTitle:i}),content:(0,t.jsx)(T,{currentUser2:i}),extraContent:(0,t.jsx)(Zt,{currentExtra:i}),children:(0,t.jsxs)(K.Z,{children:[(0,t.jsxs)(z.Z,{type:"dashed",style:{width:"100%",marginBottom:8},onClick:W,ref:a,children:[(0,t.jsx)(Y.Z,{}),"Write a commment..."]}),(0,t.jsx)(U.ZP,{size:"large",loading:C,pagination:B,rowKey:"id",itemLayout:"vertical",dataSource:i.comments,renderItem:function(s){return(0,t.jsxs)(U.ZP.Item,{children:[(0,t.jsx)(U.ZP.Item.Meta,{}),(0,t.jsx)(xt,{data:s})]},s.id)}})]})}),(0,t.jsx)(dt,{done:g,current:I,visible:Z,onDone:c,onCancel:x,onSubmit:L})]})},jt=(0,b.$j)(function(m){var n=m.Current4Cert,a=m.loading;return{Current4Cert:n,loading:a.models.Current4Cert}})(J)}}]);
