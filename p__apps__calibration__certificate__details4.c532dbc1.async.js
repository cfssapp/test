(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[785],{73947:function(N){N.exports={listContent:"listContent___3vedS",description:"description___3PN_4",extra:"extra___1NSLt"}},98250:function(N){N.exports={standardList:"standardList___kz2pc",headerInfo:"headerInfo___2cRCO",listContent:"listContent___LdtIk",listContentItem:"listContentItem___3NLFa",extraContentSearch:"extraContentSearch___1hRjc",listCard:"listCard___1nD9x",standardListForm:"standardListForm___Aq-Np",formResult:"formResult___2xNbB",listItemMetaTitle:"listItemMetaTitle___2I_Vl",listItemExtra:"listItemExtra___y5uWL",selfTrigger:"selfTrigger___9x7cu",activitiesList:"activitiesList___1qnhj",username:"username___3PmLk",event:"event___27cR9",pageHeaderContent:"pageHeaderContent___1kD8-",avatar:"avatar___1_XIl",content:"content___2OTuT",contentTitle:"contentTitle___1Ifis",extraContent:"extraContent___1AWND",statItem:"statItem___X4Kpk",members:"members___2MGoO",member:"member___17If9",projectList:"projectList___3aP5Q",cardTitle:"cardTitle___9n-it",projectGrid:"projectGrid___2FO9w",projectItemContent:"projectItemContent___2TSFf",datetime:"datetime___1nNWy",activeCard:"activeCard___2O5-J",headerList:"headerList___1unww",stepDescription:"stepDescription___3VOaI"}},2235:function(N,V,e){"use strict";e.r(V),e.d(V,{Current1Cert:function(){return J},default:function(){return Ct}});var It=e(58024),K=e(39144),yt=e(54421),R=e(38272),Lt=e(57663),z=e(71577),St=e(95300),G=e(7277),pt=e(98858),T=e(4914),d=e(8870),P=e(2824),f=e(67294),Q=e(64335),X=e(81907),Y=e(49101),b=e(97363),Tt=e(71194),w=e(57016),Ft=e(43185),k=e(94412),Nt=e(57106),q=e(99683),Pt=e(9715),M=e(82482),Mt=e(47673),_=e(4107),tt=e(30381),et=e.n(tt),nt=e(98250),Z=e.n(nt),at=e(84391),t=e(85893),rt=_.Z.TextArea,st={labelCol:{span:7},wrapperCol:{span:13}},ot=function(n){var a=M.Z.useForm(),h=(0,P.Z)(a,1),o=h[0],i=n.done,C=n.visible,l=n.current,I=n.onDone,A=n.onCancel,D=n.onSubmit;(0,f.useEffect)(function(){o&&!C&&o.resetFields()},[n.visible]),(0,f.useEffect)(function(){l&&o.setFieldsValue((0,d.Z)((0,d.Z)({},l),{},{createdAt:l.createdAt?et()(l.createdAt):null}))},[n.current]);var E=function(){!o||o.submit()},y=[],F=function(S){D&&(console.log("2. imagevalues: "+y),S.imagesupload_id=y,D(S))},H=i?{footer:null,onCancel:I}:{okText:"Save",onOk:E,onCancel:A},O=function(){if(i)return(0,t.jsx)(q.ZP,{status:"success",title:"Done",extra:(0,t.jsx)(z.Z,{type:"primary",onClick:I,children:"Okay"}),className:Z().formResult});var S={name:"imagefile",action:"https://antapi.pythonanywhere.com/calibration/comment/image/",beforeUpload:function(u){return new Promise(function(c){var x=new FileReader;x.readAsDataURL(u),x.onload=function(){var g=document.createElement("img");g.src=x.result,g.onload=function(){var p=document.createElement("canvas");p.width=g.naturalWidth,p.height=g.naturalHeight;var j=p.getContext("2d");j.drawImage(g,0,0),j.fillStyle="red",j.textBaseline="middle",j.font="33px Arial",j.fillText("Ant Design",20,20),p.toBlob(c)}}})},headers:{Authorization:"JWT "+localStorage.getItem("access_token")},onChange:function(u){var c=u.file,x=u.fileList;c.status!=="uploading"&&(console.log(c,x),console.log(c.response.id),y.push(c.response.id),console.log("2. imagevalues: "+y))}};return(0,t.jsxs)(M.Z,(0,d.Z)((0,d.Z)({},st),{},{form:o,onFinish:F,children:[(0,t.jsx)(M.Z.Item,{label:"Upload",name:"uploadimages",children:(0,t.jsx)(k.Z,(0,d.Z)((0,d.Z)({},S),{},{children:(0,t.jsx)(z.Z,{icon:(0,t.jsx)(at.Z,{}),children:"Click to Upload"})}))}),(0,t.jsx)(M.Z.Item,{name:"content",label:"Content",rules:[{message:"Minimum 5 characters",min:5}],children:(0,t.jsx)(rt,{rows:4,placeholder:"Minimum 5 characters"})})]}))};return(0,t.jsx)(w.Z,(0,d.Z)((0,d.Z)({title:i?null:"".concat(l?"Edit":"Write"," a commment..."),className:Z().standardListForm,width:640,destroyOnClose:!0,visible:C},H),{},{children:O()}))},it=ot,lt=e(73935),At=e(94233),dt=e(51890),Dt=e(49111),mt=e(19650),Et=e(12968),$=e(62462),ut=e(73947),B=e.n(ut);function ct(m){var n=m.jsonImage,a=n.map(function(h){return(0,t.jsx)($.Z,{width:50,src:h.imagefile})});return a}function vt(m){var n=m.jsonImage;return n.length===0?null:n.length!==0?(0,t.jsx)($.Z.PreviewGroup,{children:(0,t.jsx)(mt.Z,{size:"middle",children:(0,t.jsx)(ct,{jsonImage:n})})}):(0,t.jsx)("h1",{children:"Error."})}var ft=function(n){var a=n.data,h=a.content,o=a.name,i=a.created,C=a.user,l=a.href,I=a.image;return(0,t.jsxs)("div",{className:B().listContent,children:[(0,t.jsx)("div",{className:B().description,children:h}),(0,t.jsx)(vt,{jsonImage:I}),(0,t.jsxs)("div",{className:B().extra,children:[(0,t.jsx)(dt.C,{src:C.avatar,size:"small"}),(0,t.jsx)("a",{href:l,children:C.user_name}),(0,t.jsx)("em",{children:i})]})]})},ht=ft,J=function(n){var a=(0,f.useRef)(null),h=n.loading,o=n.dispatch,i=n.Current4Cert.Current5Cert,C=(0,f.useState)(!1),l=(0,P.Z)(C,2),I=l[0],A=l[1],D=(0,f.useState)(!1),E=(0,P.Z)(D,2),y=E[0],F=E[1],H=(0,f.useState)(void 0),O=(0,P.Z)(H,2),L=O[0],S=O[1];(0,f.useEffect)(function(){o({type:"Current4Cert/fetch",payload:{}})},[1]);var W=function(){F(!0),S(void 0)},u=function(){if(a.current){var s=(0,lt.findDOMNode)(a.current);setTimeout(function(){return s.blur()},0)}},c=function(){u(),A(!1),F(!1)},x=function(){u(),F(!1)},g=function(s){var r=localStorage.getItem("topic_id"),U=L?L.id:r;u(),A(!0),o({type:"Current4Cert/submit",payload:(0,d.Z)({id:U},s)})},p={showSizeChanger:!0,showQuickJumper:!0,pageSize:5},j=function(s){var r=s.currentUser2,U=r.user?r.user.user_name:r.user;return console.log(U),(0,t.jsx)(Q.Z.Consumer,{children:function(jt){var Zt=jt.isMobile;return(0,t.jsxs)(T.Z,{className:Z().headerList,size:"small",column:Zt?1:2,children:[(0,t.jsx)(T.Z.Item,{label:"Author",children:U}),(0,t.jsx)(T.Z.Item,{label:"Customer",children:r.customer}),(0,t.jsx)(T.Z.Item,{label:"Instrument",children:r.instrument}),(0,t.jsx)(T.Z.Item,{label:"Updated",children:r.updated})]})}})},xt=function(s){var r=s.currentTitle;return(0,t.jsx)("div",{children:r.certificate_id})},gt=function(s){var r=s.currentExtra;return(0,t.jsxs)("div",{className:Z().extraContent,children:[(0,t.jsx)("div",{className:Z().statItem,children:(0,t.jsx)(G.Z,{title:"Comment",value:r.post_count})}),(0,t.jsx)("div",{className:Z().statItem,children:(0,t.jsx)(G.Z,{title:"View",value:r.views})})]})};return(0,t.jsxs)("div",{children:[(0,t.jsx)(X.ZP,{title:(0,t.jsx)(xt,{currentTitle:i}),content:(0,t.jsx)(j,{currentUser2:i}),extraContent:(0,t.jsx)(gt,{currentExtra:i}),children:(0,t.jsxs)(K.Z,{children:[(0,t.jsxs)(z.Z,{type:"dashed",style:{width:"100%",marginBottom:8},onClick:W,ref:a,children:[(0,t.jsx)(Y.Z,{}),"Write a commment..."]}),(0,t.jsx)(R.ZP,{size:"large",loading:h,pagination:p,rowKey:"id",itemLayout:"vertical",dataSource:i.comments,renderItem:function(s){return(0,t.jsxs)(R.ZP.Item,{children:[(0,t.jsx)(R.ZP.Item.Meta,{}),(0,t.jsx)(ht,{data:s})]},s.id)}})]})}),(0,t.jsx)(it,{done:I,current:L,visible:y,onDone:c,onCancel:x,onSubmit:g})]})},Ct=(0,b.$j)(function(m){var n=m.Current4Cert,a=m.loading;return{Current4Cert:n,loading:a.models.Current4Cert}})(J)}}]);
