(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[576],{82055:function(V){V.exports={standardList:"standardList___1ziWY",headerInfo:"headerInfo___2jk53",listContent:"listContent___2-rY6",listContentItem:"listContentItem___1q1UC",extraContentSearch:"extraContentSearch___2NHLb",listCard:"listCard___1igAq",standardListForm:"standardListForm___ynXCl",formResult:"formResult___2EXHT"}},64445:function(V,G,e){"use strict";e.r(G),e.d(G,{default:function(){return Se}});var Ee=e(84305),ee=e(69224),Oe=e(57663),F=e(71577),Le=e(59250),te=e(13013),Re=e(30887),W=e(99210),$e=e(71194),H=e(57016),f=e(8870),Z=e(3182),X=e(19273),De=e(49111),Q=e(19650),b=e(2824),ne=e(94043),d=e.n(ne),x=e(67294),ae=e(73935),re=e(18253),oe=e(76570),se=e(49101),le=e(67265),ie=e(47651),Me=e(43358),z=e(90290),We=e(47673),ue=e(4107),ze=e(57106),de=e(99683),we=e(9715),E=e(82482),ce=e(30381),me=e.n(ce),he=e(82055),k=e.n(he),t=e(85893),fe={labelCol:{span:7},wrapperCol:{span:13}},ve=function(o){var m=E.Z.useForm(),s=(0,b.Z)(m,1),l=s[0],p=o.done,C=o.visible,j=o.current,O=o.onDone,L=o.onCancel,R=o.onSubmit;(0,x.useEffect)(function(){l&&!C&&l.resetFields()},[o.visible]),(0,x.useEffect)(function(){j&&l.setFieldsValue((0,f.Z)((0,f.Z)({},j),{},{createdAt:j.createdAt?me()(j.createdAt):null}))},[o.current]);var $=function(){!l||l.submit()},A,D=function(v){R&&(console.log(v),console.log(v.id),console.log(v.name),console.log(v.category),console.log(v.price),console.log(v.avatar),console.log(A),v.avatar=A,console.log(v.avatar),R(v))},U=p?{footer:null,onCancel:O}:{okText:"Save",onOk:$,onCancel:L},S=function(){if(p)return(0,t.jsx)(de.ZP,{status:"success",title:"Success",subTitle:"",extra:(0,t.jsx)(F.Z,{type:"primary",onClick:O,children:"OK"}),className:k().formResult});var v={name:"file_name",action:"https://antapi.pythonanywhere.com/food_delivery/csv/",headers:{Authorization:"JWT "+localStorage.getItem("access_token")},onChange:function(T){var I=T.file,K=T.fileList;I.status!=="uploading"&&(console.log(I,K),console.log(I.response.id),A=I.response.id)}};return(0,t.jsxs)(E.Z,(0,f.Z)((0,f.Z)({},fe),{},{form:l,onFinish:D,children:[(0,t.jsx)(E.Z.Item,{name:"name",label:"Name",rules:[{message:"Please input"}],children:(0,t.jsx)(ue.Z,{placeholder:"Please input"})}),(0,t.jsx)(E.Z.Item,{name:"forum",label:"Forum",children:(0,t.jsxs)(z.Z,{placeholder:"Please input",children:[(0,t.jsx)(z.Z.Option,{value:"English",children:"English"}),(0,t.jsx)(z.Z.Option,{value:"Chinese",children:"\u4E2D\u6587"})]})})]}))};return(0,t.jsx)(H.Z,(0,f.Z)((0,f.Z)({title:p?null:"".concat(j?"Edit":"Add"," Item"),className:k().standardListForm,width:640,destroyOnClose:!0,visible:C},U),{},{children:S()}))},pe=ve,q=e(91896),P=e(97363),ge="https://antapi.pythonanywhere.com/djangobb/topic/";function ye(c){return w.apply(this,arguments)}function w(){return w=(0,Z.Z)(d().mark(function c(o){return d().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,P.WY)(ge,{headers:{"Content-Type":"application/json",Authorization:"JWT "+localStorage.getItem("access_token")},params:{search:o.category}}));case 1:case"end":return s.stop()}},c)})),w.apply(this,arguments)}function Ze(c){return B.apply(this,arguments)}function B(){return B=(0,Z.Z)(d().mark(function c(o){var m;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return m=(0,q.Z)({},o),l.abrupt("return",(0,P.WY)("https://antapi.pythonanywhere.com/djangobb/topic/create/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT "+localStorage.getItem("access_token")},params:{},data:(0,f.Z)((0,f.Z)({},m),{},{method:"post"})}));case 2:case"end":return l.stop()}},c)})),B.apply(this,arguments)}function Ce(c){return J.apply(this,arguments)}function J(){return J=(0,Z.Z)(d().mark(function c(o){var m,s;return d().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return m=(0,q.Z)({},o),s=o.id,p.abrupt("return",(0,P.WY)("https://antapi.pythonanywhere.com/djangobb/topic/edit/"+s+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"JWT "+localStorage.getItem("access_token")},params:{},data:(0,f.Z)((0,f.Z)({},m),{},{method:"update"})}));case 3:case"end":return p.stop()}},c)})),J.apply(this,arguments)}function je(c){return N.apply(this,arguments)}function N(){return N=(0,Z.Z)(d().mark(function c(o){return d().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,P.WY)("https://antapi.pythonanywhere.com/djangobb/topic/delete/"+o+"/",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"JWT "+localStorage.getItem("access_token")},params:{},data:{method:"delete"}}));case 1:case"end":return s.stop()}},c)})),N.apply(this,arguments)}function Be(c){return Y.apply(this,arguments)}function Y(){return Y=_asyncToGenerator(_regeneratorRuntime.mark(function c(o){var m;return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return m=_extends({},o),l.abrupt("return",request("https://antapi.pythonanywhere.com/djangobb/add-to-cart/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT "+localStorage.getItem("access_token")},params:{},data:_objectSpread(_objectSpread({},m),{},{method:"post"})}));case 2:case"end":return l.stop()}},c)})),Y.apply(this,arguments)}var xe=function(o){var m=(0,x.useRef)(null),s=(0,x.useRef)(),l=(0,x.useState)(void 0),p=(0,b.Z)(l,2),C=p[0],j=p[1],O=(0,x.useState)(!1),L=(0,b.Z)(O,2),R=L[0],$=L[1],A=(0,x.useState)(!1),D=(0,b.Z)(A,2),U=D[0],S=D[1],M=[{title:"#",dataIndex:"index",valueType:"indexBorder",width:48},{dataIndex:["user","avatar"],title:"Name",valueType:"avatar",render:function(n,a){return(0,t.jsxs)(Q.Z,{children:[(0,t.jsx)("span",{children:n}),a.name]})},hideInSearch:!0},{title:"Created",dataIndex:"created",hideInSearch:!0},{title:"Updated",dataIndex:"updated",hideInSearch:!0},{title:"Views",dataIndex:"views",hideInSearch:!0},{title:"Post Count",dataIndex:"post_count",hideInSearch:!0},{title:"Forum",dataIndex:"forum",valueEnum:{Burgers:{text:"English"},Beverages:{text:"\u4E2D\u6587"}},hideInTable:!0},{title:"Action",dataIndex:"option",valueType:"option",render:function(n,a){return(0,t.jsx)(Q.Z,{size:"middle",children:(0,t.jsx)(be,{item:a},"more")})}}];(0,X.Z)(o);var v={showSizeChanger:!1,showQuickJumper:!1,showTotal:!1,pageSize:10},_=function(){S(!0),j(void 0)},T=function(){if(m.current){var n=(0,ae.findDOMNode)(m.current);setTimeout(function(){return n.blur()},0)}},I=function(){T(),$(!1),S(!1)},K=function(){T(),S(!1)},Te=function(){var i=(0,Z.Z)(d().mark(function n(a){var u,h,r;return d().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(h=C?C.id:"",console.log(h),T(),!h){g.next=9;break}return g.next=6,Ce((0,f.Z)({id:h},a));case 6:r=g.sent,g.next=12;break;case 9:return g.next=11,Ze((0,f.Z)({},a));case 11:r=g.sent;case 12:return $(!0),(u=s.current)===null||u===void 0||u.reload(),g.abrupt("return",Promise.resolve({data:r,success:!0}));case 15:case"end":return g.stop()}},n)}));return function(a){return i.apply(this,arguments)}}(),Ie=function(n){S(!0),j(n)},Pe=function(){var i=(0,Z.Z)(d().mark(function n(a){var u,h;return d().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,je(a);case 2:return h=y.sent,(u=s.current)===null||u===void 0||u.reload(),y.abrupt("return",Promise.resolve({data:h,success:!0}));case 5:case"end":return y.stop()}},n)}));return function(a){return i.apply(this,arguments)}}(),Ae=function(n,a){n==="edit"?Ie(a):n==="delete"&&H.Z.confirm({title:"\u5220\u9664\u4EFB\u52A1",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u4EFB\u52A1\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){return Pe(a.id)}})},Fe=function(){var i=(0,Z.Z)(d().mark(function n(a){var u;return d().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:u=C?C.id:a.id,localStorage.setItem("topic_id",u),P.m8.push("/comment/post");case 3:case"end":return r.stop()}},n)}));return function(a){return i.apply(this,arguments)}}(),be=function(n){var a=n.item;return(0,t.jsx)(te.Z.Button,{onClick:function(h){return(0,X.Z)(h),Fe(a)},overlay:(0,t.jsxs)(W.Z,{onClick:function(h){var r=h.key;return Ae(r,a)},children:[(0,t.jsx)(W.Z.Item,{children:"edit"},"edit"),(0,t.jsx)(W.Z.Item,{children:"delete"},"delete")]}),children:(0,t.jsx)(oe.Z,{})})};return(0,t.jsxs)("div",{children:[(0,t.jsx)(le.ZP,{children:(0,t.jsx)(ee.ZP,{locale:re.Z,children:(0,t.jsx)(ie.ZP,{headerTitle:"Topics",actionRef:s,rowKey:function(n,a){return"complete".concat(n.id).concat(a)},request:function(){var i=(0,Z.Z)(d().mark(function n(a){var u;return d().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(a.category),r.next=3,ye(a);case 3:return u=r.sent,r.abrupt("return",Promise.resolve({data:u,success:!0}));case 5:case"end":return r.stop()}},n)}));return function(n){return i.apply(this,arguments)}}(),toolbar:{actions:[(0,t.jsxs)(F.Z,{type:"primary",onClick:_,children:[(0,t.jsx)(se.Z,{})," Add"]})]},search:{defaultCollapsed:!1,labelWidth:"auto",optionRender:function(n,a){var u=n.searchText,h=n.resetText,r=a.form;return[(0,t.jsx)(F.Z,{type:"primary",onClick:function(){r==null||r.submit()},children:u},"searchText"),(0,t.jsx)(F.Z,{onClick:function(){r==null||r.resetFields()},children:h},"resetText")]}},options:!1,onLoadingChange:!0,pagination:v,size:"middle",columns:M})})}),(0,t.jsx)(pe,{done:R,current:C,visible:U,onDone:I,onCancel:K,onSubmit:Te})]})},Se=xe}}]);
