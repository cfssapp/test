(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{5966:function(D,S,r){"use strict";var E=r(67294),P=r(59009),g=r(64893),y=["fieldProps","proFieldProps"];function v(){return v=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},v.apply(this,arguments)}function B(t,a){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);a&&(e=e.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,e)}return n}function b(t){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?B(Object(n),!0).forEach(function(e){m(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function m(t,a,n){return a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}function h(t,a){if(t==null)return{};var n=w(t,a),e,l;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(l=0;l<u.length;l++)e=u[l],!(a.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,e)||(n[e]=t[e]))}return n}function w(t,a){if(t==null)return{};var n={},e=Object.keys(t),l,u;for(u=0;u<e.length;u++)l=e[u],!(a.indexOf(l)>=0)&&(n[l]=t[l]);return n}var T="text",N=(0,g.Z)(function(t){var a=t.fieldProps,n=t.proFieldProps,e=h(t,y);return E.createElement(P.ZP,v({mode:"edit",valueType:T,fieldProps:b(b({},a),{},{onChange:function(){for(var u,j,c=arguments.length,s=new Array(c),I=0;I<c;I++)s[I]=arguments[I];a==null||(u=a.onChange)===null||u===void 0||u.call.apply(u,[a].concat(s)),e==null||(j=e.onChange)===null||j===void 0||j.call.apply(j,[e].concat(s))}})},n))},{valueType:T}),F=(0,g.Z)(function(t){var a=t.fieldProps,n=t.proFieldProps;return E.createElement(P.ZP,v({mode:"edit",valueType:"password",fieldProps:a},n))},{valueType:T}),_=N;_.Password=F,S.Z=_},68408:function(D){D.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},7330:function(){},11816:function(D,S,r){"use strict";r.r(S),r.d(S,{default:function(){return X}});var E=r(34792),P=r(48086),g=r(8870),y=r(3182),v=r(2824),B=r(17462),b=r(94043),m=r.n(b),h=r(67294),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},T=w,N=r(27029),F=function(Z,x){return h.createElement(N.Z,Object.assign({},Z,{ref:x,icon:T}))};F.displayName="LockOutlined";var _=h.forwardRef(F),t=r(89366),a=r(15196),n=r(5966),e=r(97363),l=r(73727),u=r(36571),j=r(68408),c=r.n(j),s=r(85893),I=function(Z){var x=Z.content;return _jsx(_Alert,{style:{marginBottom:24},message:x,type:"error",showIcon:!0})},G=function(){var Z=(0,h.useState)(!1),x=(0,v.Z)(Z,2),Y=x[0],W=x[1],J=(0,h.useState)({}),z=(0,v.Z)(J,2),K=z[0],Q=z[1],k=(0,h.useState)("account"),R=(0,v.Z)(k,2),q=R[0],ae=R[1],$=(0,e.tT)("@@initialState"),C=$.initialState,ee=$.setInitialState,M=(0,e.YB)(),te=function(){var L=(0,y.Z)(m().mark(function p(){var d,i;return m().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,C==null||(d=C.fetchUserInfo)===null||d===void 0?void 0:d.call(C);case 2:if(i=f.sent,!i){f.next=6;break}return f.next=6,ee(function(U){return(0,g.Z)((0,g.Z)({},U),{},{currentUser:i})});case 6:case"end":return f.stop()}},p)}));return function(){return L.apply(this,arguments)}}(),re=function(){var L=(0,y.Z)(m().mark(function p(d){var i,O,f,U,H,V;return m().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return W(!0),o.prev=1,o.next=4,(0,u.x4)((0,g.Z)((0,g.Z)({},d),{},{type:q}));case 4:if(i=o.sent,console.log(i),console.log(i.access),console.log(i.refresh),console.log(i.id),localStorage.setItem("access_token",i.access),localStorage.setItem("refresh_token",i.refresh),localStorage.setItem("user_id",i.id),i.status!=="ok"){o.next=23;break}return O=M.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),P.default.success(O),o.next=17,te();case 17:if(e.m8){o.next=19;break}return o.abrupt("return");case 19:return f=e.m8.location.query,U=f,H=U.redirect,e.m8.push(H||"/"),o.abrupt("return");case 23:Q(i),o.next=30;break;case 26:o.prev=26,o.t0=o.catch(1),V=M.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),P.default.error(V);case 30:W(!1);case 31:case"end":return o.stop()}},p,null,[[1,26]])}));return function(d){return L.apply(this,arguments)}}(),ne=K.status,se=K.type;return(0,s.jsxs)("div",{className:c().container,children:[(0,s.jsx)("div",{className:c().lang,"data-lang":!0,children:e.pD&&(0,s.jsx)(e.pD,{})}),(0,s.jsxs)("div",{className:c().content,children:[(0,s.jsxs)("div",{className:c().top,children:[(0,s.jsx)("div",{className:c().header,children:(0,s.jsxs)(l.rU,{to:"/",children:[(0,s.jsx)("img",{alt:"logo",className:c().logo,src:"/logo.svg"}),(0,s.jsx)("span",{className:c().title,children:"React"})]})}),(0,s.jsx)("div",{className:c().desc,children:M.formatMessage({id:"pages.layouts.userLayout.title"})})]}),(0,s.jsx)("div",{className:c().main,children:(0,s.jsx)(a.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:M.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(p,d){return d.pop()},submitButtonProps:{loading:Y,size:"large",style:{width:"100%"}}},onFinish:function(){var L=(0,y.Z)(m().mark(function p(d){return m().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:re(d);case 1:case"end":return O.stop()}},p)}));return function(p){return L.apply(this,arguments)}}(),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{name:"user_name",fieldProps:{size:"large",prefix:(0,s.jsx)(t.Z,{className:c().prefixIcon})},placeholder:M.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: guest"}),rules:[{required:!0,message:(0,s.jsx)(e._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,s.jsx)(n.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,s.jsx)(_,{className:c().prefixIcon})},placeholder:M.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: guest"}),rules:[{required:!0,message:(0,s.jsx)(e._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]})})})]})]})},X=G},17462:function(D,S,r){"use strict";var E=r(43673),P=r.n(E),g=r(7330),y=r.n(g)}}]);
