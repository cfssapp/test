(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[511],{15507:function(U){U.exports={standardList:"standardList___2sn6F",headerInfo:"headerInfo___1CvZH",listContent:"listContent___33Llr",listContentItem:"listContentItem___3sXHk",extraContentSearch:"extraContentSearch___1_GRm",listCard:"listCard___2afOu",standardListForm:"standardListForm___1nPfn",formResult:"formResult___3-IHz",listItemMetaTitle:"listItemMetaTitle___i1Zcs",listItemExtra:"listItemExtra___3cRAl",selfTrigger:"selfTrigger___2jHDW",activitiesList:"activitiesList___2Ea5J",username:"username___3Sr_p",event:"event___2oNE5",pageHeaderContent:"pageHeaderContent___2zJtg",avatar:"avatar___YIl-P",content:"content___1KcY-",contentTitle:"contentTitle___3bM1e",extraContent:"extraContent___GFHF5",statItem:"statItem___3hu1l",members:"members___1lmac",member:"member___1d4jr",projectList:"projectList___1EPvQ",cardTitle:"cardTitle___1nDVV",projectGrid:"projectGrid___1OX0x",projectItemContent:"projectItemContent___geKCL",datetime:"datetime___1fZqL",activeCard:"activeCard___GgIgz",headerList:"headerList___2N4_9",stepDescription:"stepDescription___ez6ur"}},1332:function(U,B,e){"use strict";e.r(B),e.d(B,{Time1line:function(){return W},default:function(){return ve}});var je=e(58024),X=e(39144),Te=e(54421),z=e(38272),Ze=e(94233),G=e(51890),ye=e(71748),Y=e(33860),o=e(8870),S=e(2824),b=e(3182),w=e(94043),$=e.n(w),m=e(67294),k=e(75362),J=e(97363),Fe=e(71194),q=e(57016),Se=e(43185),_=e(94412),pe=e(57106),ee=e(99683),De=e(57663),V=e(71577),Ie=e(9715),p=e(82482),Le=e(47673),te=e(4107),ne=e(30381),Q=e.n(ne),ae=e(15507),i=e.n(ae),re=e(84391),se=e(98005),ie=e.n(se),t=e(85893),le=te.Z.TextArea,oe={labelCol:{span:7},wrapperCol:{span:13}},de=function(a){var f=p.Z.useForm(),I=(0,S.Z)(f,1),d=I[0],h=a.done,L=a.visible,g=a.current,T=a.onDone,A=a.onCancel,E=a.onSubmit;(0,m.useEffect)(function(){d&&!L&&d.resetFields()},[a.visible]),(0,m.useEffect)(function(){g&&d.setFieldsValue((0,o.Z)((0,o.Z)({},g),{},{createdAt:g.createdAt?Q()(g.createdAt):null}))},[a.current]);var P=function(){!d||d.submit()},C=[],M=function(u){E&&(console.log("2. imagevalues: "+C),u.imagesupload_id=C,E(u))},O=h?{footer:null,onCancel:T}:{okText:"Save",onOk:P,onCancel:A},N=function(){if(h)return(0,t.jsx)(ee.ZP,{status:"success",title:"Done",extra:(0,t.jsx)(V.Z,{type:"primary",onClick:T,children:"Okay"}),className:i().formResult});var u={name:"imagefile",action:"https://antapi.pythonanywhere.com/calibration/comment/image/",beforeUpload:function(c){return new Promise(function(l){var v=(c.size/1024/1024).toFixed(1),Z;if(v<1)Z=1;else if(v<2)Z=.6;else if(v<5)Z=.4;else return new Promise(function(y,F){F({msg:"Image not larger than 10m"})});new(ie())(c,{quality:Z,success:function(F){l(F)}})})},headers:{Authorization:"JWT "+localStorage.getItem("access_token")},onChange:function(c){var l=c.file,v=c.fileList;l.status!=="uploading"&&(console.log(l,v),console.log(l.response.id),C.push(l.response.id),console.log("2. imagevalues: "+C))}};return(0,t.jsxs)(p.Z,(0,o.Z)((0,o.Z)({},oe),{},{form:d,onFinish:M,children:[(0,t.jsx)(p.Z.Item,{label:"Upload",name:"uploadimages",children:(0,t.jsx)(_.Z,(0,o.Z)((0,o.Z)({},u),{},{children:(0,t.jsx)(V.Z,{icon:(0,t.jsx)(re.Z,{}),children:"Click to Upload"})}))}),(0,t.jsx)(p.Z.Item,{name:"content",label:"Content",rules:[{message:"Minimum 5 characters",min:5}],children:(0,t.jsx)(le,{rows:4,placeholder:"Minimum 5 characters"})})]}))};return(0,t.jsx)(q.Z,(0,o.Z)((0,o.Z)({title:h?null:"".concat(g?"Edit":"Write"," a commment..."),className:i().standardListForm,width:640,destroyOnClose:!0,visible:L},O),{},{children:N()}))},ue=de,ce=e(73935),me=e(1174),W=function(a){var f=(0,m.useRef)(null),I=(0,J.QT)(function(){var r=(0,b.Z)($().mark(function n(s){var x;return $().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,me.fp)();case 2:return x=j.sent,j.abrupt("return",x);case 4:case"end":return j.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),{formatResult:function(n){return n}}),d=I.loading,h=I.data,L=h===void 0?[]:h,g=a.loading,T=a.dispatch,A=a.Time4line.Time5line,E=(0,m.useState)(!1),P=(0,S.Z)(E,2),C=P[0],M=P[1],O=(0,m.useState)(!1),N=(0,S.Z)(O,2),H=N[0],u=N[1],R=(0,m.useState)(void 0),c=(0,S.Z)(R,2),l=c[0],v=c[1];(0,m.useEffect)(function(){T({type:"Time4line/fetch",payload:{}})},[1]);var Z=function(){u(!0),v(void 0)},y=function(){if(f.current){var n=(0,ce.findDOMNode)(f.current);setTimeout(function(){return n.blur()},0)}},F=function(){y(),M(!1),u(!1)},fe=function(){y(),u(!1)},he=function(n){var s=localStorage.getItem("topic_id"),x=l?l.id:s;y(),M(!0),T({type:"Time4line/submit",payload:(0,o.Z)({id:x},n)})},Ae={showSizeChanger:!0,showQuickJumper:!0,pageSize:5},ge=function(n){var s=n.currentTitle;return(0,t.jsx)("div",{children:"Timeline"})},Ce=function(n){var s=n.currentUser2,x=s&&Object.keys(s).length;if(!x)return(0,t.jsx)(Y.Z,{avatar:!0,paragraph:{rows:1},active:!0});var K=s&&s.user_name;return console.log(K),(0,t.jsxs)("div",{className:i().pageHeaderContent,children:[(0,t.jsx)("div",{className:i().avatar,children:(0,t.jsx)(G.C,{size:"large",src:s.avatar})}),(0,t.jsxs)("div",{className:i().content,children:[(0,t.jsx)("div",{className:i().contentTitle,children:s.user_name}),(0,t.jsx)("div",{children:"\u4EA4\u4E92\u4E13\u5BB6 |\u8682\u8681\u91D1\u670D\uFF0D\u67D0\u67D0\u67D0\u4E8B\u4E1A\u7FA4\uFF0D\u67D0\u67D0\u5E73\u53F0\u90E8\uFF0D\u67D0\u67D0\u6280\u672F\u90E8\uFF0DUED"})]})]})},xe=function(n){return(0,t.jsx)(z.ZP.Item,{children:(0,t.jsx)(z.ZP.Item.Meta,{avatar:(0,t.jsx)(G.C,{src:n.user.avatar}),title:(0,t.jsxs)("span",{children:[(0,t.jsx)("a",{className:i().username,children:n.user.user_name}),"\xA0"]}),description:(0,t.jsx)("span",{className:i().datetime,title:n.updatedAt,children:Q()(n.updatedAt).fromNow()})})},n.id)};return(0,t.jsxs)("div",{children:[(0,t.jsx)(k.ZP,{title:(0,t.jsx)(ge,{currentTitle:A}),content:(0,t.jsx)(Ce,{currentUser2:A}),children:(0,t.jsx)(X.Z,{bodyStyle:{padding:0},bordered:!1,className:i().activeCard,title:"Activity Log",loading:d,children:(0,t.jsx)(z.ZP,{loading:d,renderItem:function(n){return xe(n)},dataSource:L,className:i().activitiesList,size:"large"})})}),(0,t.jsx)(ue,{done:C,current:l,visible:H,onDone:F,onCancel:fe,onSubmit:he})]})},ve=(0,J.$j)(function(D){var a=D.Time4line,f=D.loading;return{Time4line:a,loading:f.models.Time4line}})(W)}}]);
