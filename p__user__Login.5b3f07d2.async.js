(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{68408:function(w){w.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},92175:function(w,N,n){"use strict";n.r(N),n.d(N,{default:function(){return le}});var ge=n(34792),C=n(48086),L=n(8870),F=n(3182),T=n(2824),pe=n(17462),K=n(94043),y=n.n(K),v=n(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},X=R,Y=n(27029),z=function(r,t){return v.createElement(Y.Z,Object.assign({},r,{ref:t,icon:X}))};z.displayName="LockOutlined";var J=v.forwardRef(z),Q=n(89366),U=n(88757),B=n(64893),k=["fieldProps","proFieldProps"];function M(){return M=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},M.apply(this,arguments)}function D(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,a)}return t}function E(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?D(Object(t),!0).forEach(function(a){q(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function q(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _(e,r){if(e==null)return{};var t=ee(e,r),a,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)a=u[o],!(r.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,a)||(t[a]=e[a]))}return t}function ee(e,r){if(e==null)return{};var t={},a=Object.keys(e),o,u;for(u=0;u<a.length;u++)o=a[u],!(r.indexOf(o)>=0)&&(t[o]=e[o]);return t}var I="text",re=(0,B.Z)(function(e){var r=e.fieldProps,t=e.proFieldProps,a=_(e,k);return v.createElement(U.ZP,M({mode:"edit",valueType:I,fieldProps:E(E({},r),{},{onChange:function(){for(var u,m,x=arguments.length,S=new Array(x),j=0;j<x;j++)S[j]=arguments[j];r==null||(u=r.onChange)===null||u===void 0||u.call.apply(u,[r].concat(S)),a==null||(m=a.onChange)===null||m===void 0||m.call.apply(m,[a].concat(S))}})},t))},{valueType:I}),te=(0,B.Z)(function(e){var r=e.fieldProps,t=e.proFieldProps;return v.createElement(U.ZP,M({mode:"edit",valueType:"password",fieldProps:r},t))},{valueType:I}),$=re;$.Password=te;var H=$,ae=n(15196),g=n(97363),ne=n(73727),se=n(36571),oe=n(68408),c=n.n(oe),s=n(85893),ve=function(r){var t=r.content;return _jsx(_Alert,{style:{marginBottom:24},message:t,type:"error",showIcon:!0})},ie=function(){var r=(0,v.useState)(!1),t=(0,T.Z)(r,2),a=t[0],o=t[1],u=(0,v.useState)({}),m=(0,T.Z)(u,2),x=m[0],S=m[1],j=(0,v.useState)("account"),V=(0,T.Z)(j,2),ue=V[0],me=V[1],A=(0,g.tT)("@@initialState"),b=A.initialState,ce=A.setInitialState,O=(0,g.YB)(),de=function(){var P=(0,F.Z)(y().mark(function p(){var d,i;return y().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,b==null||(d=b.fetchUserInfo)===null||d===void 0?void 0:d.call(b);case 2:if(i=f.sent,!i){f.next=6;break}return f.next=6,ce(function(Z){return(0,L.Z)((0,L.Z)({},Z),{},{currentUser:i})});case 6:case"end":return f.stop()}},p)}));return function(){return P.apply(this,arguments)}}(),fe=function(){var P=(0,F.Z)(y().mark(function p(d){var i,h,f,Z,W,G;return y().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o(!0),l.prev=1,l.next=4,(0,se.x4)((0,L.Z)((0,L.Z)({},d),{},{type:ue}));case 4:if(i=l.sent,console.log(i),console.log(i.access),console.log(i.refresh),console.log(i.id),localStorage.setItem("access_token",i.access),localStorage.setItem("refresh_token",i.refresh),localStorage.setItem("user_id",i.id),i.status!=="ok"){l.next=23;break}return h=O.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),C.default.success(h),l.next=17,de();case 17:if(g.m8){l.next=19;break}return l.abrupt("return");case 19:return f=g.m8.location.query,Z=f,W=Z.redirect,g.m8.push(W||"/"),l.abrupt("return");case 23:S(i),l.next=30;break;case 26:l.prev=26,l.t0=l.catch(1),G=O.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),C.default.error(G);case 30:o(!1);case 31:case"end":return l.stop()}},p,null,[[1,26]])}));return function(d){return P.apply(this,arguments)}}(),he=x.status,ye=x.type;return(0,s.jsxs)("div",{className:c().container,children:[(0,s.jsx)("div",{className:c().lang,"data-lang":!0,children:g.pD&&(0,s.jsx)(g.pD,{})}),(0,s.jsxs)("div",{className:c().content,children:[(0,s.jsxs)("div",{className:c().top,children:[(0,s.jsx)("div",{className:c().header,children:(0,s.jsxs)(ne.rU,{to:"/",children:[(0,s.jsx)("img",{alt:"logo",className:c().logo,src:"/logo.svg"}),(0,s.jsx)("span",{className:c().title,children:"React"})]})}),(0,s.jsx)("div",{className:c().desc,children:O.formatMessage({id:"pages.layouts.userLayout.title"})})]}),(0,s.jsx)("div",{className:c().main,children:(0,s.jsx)(ae.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:O.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(p,d){return d.pop()},submitButtonProps:{loading:a,size:"large",style:{width:"100%"}}},onFinish:function(){var P=(0,F.Z)(y().mark(function p(d){return y().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:fe(d);case 1:case"end":return h.stop()}},p)}));return function(p){return P.apply(this,arguments)}}(),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H,{name:"user_name",fieldProps:{size:"large",prefix:(0,s.jsx)(Q.Z,{className:c().prefixIcon})},placeholder:O.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: guest"}),rules:[{required:!0,message:(0,s.jsx)(g._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,s.jsx)(H.Password,{name:"password",fieldProps:{size:"large",prefix:(0,s.jsx)(J,{className:c().prefixIcon})},placeholder:O.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: guest"}),rules:[{required:!0,message:(0,s.jsx)(g._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]})})})]})]})},le=ie}}]);
