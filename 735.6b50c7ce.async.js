(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[735],{64317:function(Ee,V,c){"use strict";var Z=c(67294),x=c(94286),Y=c(22270),$=c(64893);function I(){return I=Object.assign||function(l){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(l[y]=m[y])}return l},I.apply(this,arguments)}function C(l,d){var m=Object.keys(l);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(l);d&&(y=y.filter(function(F){return Object.getOwnPropertyDescriptor(l,F).enumerable})),m.push.apply(m,y)}return m}function J(l){for(var d=1;d<arguments.length;d++){var m=arguments[d]!=null?arguments[d]:{};d%2?C(Object(m),!0).forEach(function(y){K(l,y,m[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(m)):C(Object(m)).forEach(function(y){Object.defineProperty(l,y,Object.getOwnPropertyDescriptor(m,y))})}return l}function K(l,d,m){return d in l?Object.defineProperty(l,d,{value:m,enumerable:!0,configurable:!0,writable:!0}):l[d]=m,l}var le=Z.forwardRef(function(l,d){var m=l.fieldProps,y=l.children,F=l.params,T=l.proFieldProps,L=l.mode,E=l.valueEnum,j=l.request,W=l.showSearch,B=l.options;return Z.createElement(x.ZP,I({mode:"edit",valueEnum:(0,Y.h)(E),request:j,params:F,valueType:"select",fieldProps:J({options:B,mode:L,showSearch:W},m),ref:d},T),y)}),Q=Z.forwardRef(function(l,d){var m=l.fieldProps,y=l.children,F=l.params,T=l.proFieldProps,L=l.mode,E=l.valueEnum,j=l.request,W=l.options,B=J({options:W,mode:L||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label",filterOption:!1},m);return Z.createElement(x.ZP,I({mode:"edit",valueEnum:(0,Y.h)(E),request:j,params:F,valueType:"select",fieldProps:B,ref:d},T),y)}),s=(0,$.Z)(le,{customLightMode:!0}),X=(0,$.Z)(Q,{customLightMode:!0}),H=s;H.SearchSelect=X,V.Z=H},65554:function(Ee,V,c){"use strict";c.d(V,{b:function(){return ee},Z:function(){return Ne}});var Z=c(9715),x=c(82482),Y=c(49111),$=c(19650),I=c(57663),C=c(71577),J=c(35556),K=c(97880),le=c(84305),Q=c(69224),s=c(67294),X=c(50344),H=c(21770),l=c(94184),d=c.n(l),m=c(12862),y=c(56725),F=c(80334),T=c(73420),L=["onFinish","step","formRef","title","stepProps"];function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(this,arguments)}function j(e,t,r,n,a,f,v){try{var o=e[f](v),i=o.value}catch(M){r(M);return}o.done?t(i):Promise.resolve(i).then(n,a)}function W(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var f=e.apply(t,r);function v(i){j(f,n,a,v,o,"next",i)}function o(i){j(f,n,a,v,o,"throw",i)}v(void 0)})}}function B(e,t){if(e==null)return{};var r=Re(e,t),n,a;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(a=0;a<f.length;a++)n=f[a],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function Re(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,f;for(f=0;f<n.length;f++)a=n[f],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Ce(e){var t=e.onFinish,r=e.step,n=e.formRef,a=e.title,f=e.stepProps,v=B(e,L),o=(0,s.useRef)(),i=(0,s.useContext)(ee);return(0,F.ET)(!v.submitter,"StepForm \u4E0D\u5305\u542B\u63D0\u4EA4\u6309\u94AE\uFF0C\u8BF7\u5728 StepsForm \u4E0A"),(0,s.useImperativeHandle)(n,function(){return o.current}),(0,s.useEffect)(function(){return function(){v.name&&(i==null||i.unRegForm(v.name))}},[]),i&&(i==null?void 0:i.formArrayRef)&&(i.formArrayRef.current[r||0]=o),s.createElement(T.Z,E({formRef:o,onFinish:function(){var M=W(regeneratorRuntime.mark(function U(k){var te;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(v.name&&(i==null||i.onFormFinish(v.name,k)),!t){P.next=9;break}return i==null||i.setLoading(!0),P.next=5,t==null?void 0:t(k);case 5:return te=P.sent,te&&(i==null||i.next()),i==null||i.setLoading(!1),P.abrupt("return");case 9:i==null||i.next();case 10:case"end":return P.stop()}},U)}));return function(U){return M.apply(this,arguments)}}(),layout:"vertical"},v))}var je=Ce,or=c(98211),Me=c(72378),we=c.n(Me),Ae=["current","onCurrentChange","submitter","stepsFormRender","stepsRender","stepFormRender","stepsProps","onFinish","formProps","containerStyle","formRef","formMapRef"];function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fe(Object(r),!0).forEach(function(n){ce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R.apply(this,arguments)}function De(e){return Ie(e)||xe(e)||ve(e)||Ze()}function Ze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xe(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ie(e){if(Array.isArray(e))return _(e)}function me(e,t,r,n,a,f,v){try{var o=e[f](v),i=o.value}catch(M){r(M);return}o.done?t(i):Promise.resolve(i).then(n,a)}function Te(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var f=e.apply(t,r);function v(i){me(f,n,a,v,o,"next",i)}function o(i){me(f,n,a,v,o,"throw",i)}v(void 0)})}}function q(e,t){return Be(e)||We(e,t)||ve(e,t)||Le()}function Le(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ve(e,t){if(!!e){if(typeof e=="string")return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}}function _(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function We(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],a=!0,f=!1,v,o;try{for(r=r.call(e);!(a=(v=r.next()).done)&&(n.push(v.value),!(t&&n.length===t));a=!0);}catch(i){f=!0,o=i}finally{try{!a&&r.return!=null&&r.return()}finally{if(f)throw o}}return n}}function Be(e){if(Array.isArray(e))return e}function $e(e,t){if(e==null)return{};var r=Ke(e,t),n,a;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(a=0;a<f.length;a++)n=f[a],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function Ke(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,f;for(f=0;f<n.length;f++)a=n[f],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var ee=s.createContext(void 0);function He(e){var t,r=(0,s.useContext)(Q.ZP.ConfigContext),n=r.getPrefixCls,a=n("pro-steps-form"),f=e.current,v=e.onCurrentChange,o=e.submitter,i=e.stepsFormRender,M=e.stepsRender,U=e.stepFormRender,k=e.stepsProps,te=e.onFinish,pe=e.formProps,P=e.containerStyle,Ue=e.formRef,ke=e.formMapRef,Ge=$e(e,Ae),ne=(0,s.useRef)(new Map),S=(0,s.useRef)(new Map),w=(0,s.useRef)([]),ze=(0,y.Z)([]),de=q(ze,2),A=de[0],Ve=de[1],Ye=(0,y.Z)(!1),ye=q(Ye,2),oe=ye[0],ae=ye[1],ie=(0,m.YB)(),Je=(0,H.Z)(0,{value:e.current,onChange:e.onCurrentChange}),ge=q(Je,2),h=ge[0],G=ge[1],Qe=(0,s.useCallback)(function(p,u){S.current.set(p,u)},[]),Xe=(0,s.useCallback)(function(p){S.current.delete(p),ne.current.delete(p)},[]);(0,s.useEffect)(function(){Ve(Array.from(S.current.keys()))},[Array.from(S.current.keys()).join(",")]);var qe=(t=w.current[h||0])===null||t===void 0?void 0:t.current;(0,s.useImperativeHandle)(ke,function(){return w.current}),(0,s.useImperativeHandle)(Ue,function(){return qe});var _e=(0,s.useCallback)(function(){var p=Te(regeneratorRuntime.mark(function u(b,O){var D,z;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(ne.current.set(b,O),!(h===S.current.size-1||S.current.size===0)){g.next=19;break}if(e.onFinish){g.next=4;break}return g.abrupt("return");case 4:return ae(!0),D=we().apply(void 0,[{}].concat(De(Array.from(ne.current.values())))),g.prev=6,g.next=9,e.onFinish(D);case 9:z=g.sent,z&&(G(0),w.current.forEach(function(nr){var se;return(se=nr.current)===null||se===void 0?void 0:se.resetFields()})),g.next=16;break;case 13:g.prev=13,g.t0=g.catch(6),console.log(g.t0);case 16:return g.prev=16,ae(!1),g.finish(16);case 19:case"end":return g.stop()}},u,null,[[6,13,16,19]])}));return function(u,b){return p.apply(this,arguments)}}(),[e,h]),he=s.createElement("div",{className:"".concat(a,"-steps-container"),style:{maxWidth:Math.min(A.length*320,1160)}},s.createElement(K.Z,R({},k,{current:h,onChange:void 0}),A.map(function(p){var u=S.current.get(p);return s.createElement(K.Z.Step,R({key:p,title:u==null?void 0:u.title},u==null?void 0:u.stepProps))}))),ue=function(){var u,b=w.current[h];(u=b.current)===null||u===void 0||u.submit()},be=o!==!1&&s.createElement(C.Z,R({key:"next",type:"primary",loading:oe},o==null?void 0:o.submitButtonProps,{onClick:function(){var u;o==null||(u=o.onSubmit)===null||u===void 0||u.call(o),ue()}}),ie.getMessage("stepsForm.next","\u4E0B\u4E00\u6B65")),Pe=o!==!1&&s.createElement(C.Z,R({key:"pre"},o==null?void 0:o.resetButtonProps,{onClick:function(){var u;G(h-1),o==null||(u=o.onReset)===null||u===void 0||u.call(o)}}),ie.getMessage("stepsForm.prev","\u4E0A\u4E00\u6B65")),er=o!==!1&&s.createElement(C.Z,R({key:"submit",type:"primary",loading:oe},o==null?void 0:o.submitButtonProps,{onClick:function(){var u;o==null||(u=o.onSubmit)===null||u===void 0||u.call(o),ue()}}),ie.getMessage("stepsForm.submit","\u63D0\u4EA4")),rr=function(){var u=h||0;return u<1?[be]:u+1===A.length?[Pe,er]:[Pe,be]},Se=function(){var u=rr();if(o&&o.render){var b,O={form:(b=w.current[h])===null||b===void 0?void 0:b.current,onSubmit:ue,step:h,onPre:function(){h<1||G(h-1)}};return o.render(O,u)}return o&&(o==null?void 0:o.render)===!1?null:u},Oe=(0,X.Z)(e.children).map(function(p,u){var b=p.props,O=b.name||"".concat(u);Qe(O,b);var D=h===u,z=D?{contentRender:U,submitter:!1}:{};return s.createElement("div",{className:d()("".concat(a,"-step"),ce({},"".concat(a,"-step-active"),D)),key:O},s.cloneElement(p,N(N(N(N({},z),pe),b),{},{name:O,step:u,key:O})))}),Fe=e.stepsRender?e.stepsRender(A.map(function(p){var u;return{key:p,title:(u=S.current.get(p))===null||u===void 0?void 0:u.title}}),he):he,tr=Se();return s.createElement("div",{className:a},s.createElement(x.Z.Provider,Ge,s.createElement(ee.Provider,{value:{loading:oe,setLoading:ae,keyArray:A,next:function(){h>A.length-2||G(h+1)},formArrayRef:w,formMapRef:S,unRegForm:Xe,onFormFinish:_e}},i?i(s.createElement(s.Fragment,null,Fe,s.createElement("div",{className:"".concat(a,"-container"),style:P},Oe)),tr):s.createElement(s.Fragment,null,Fe,s.createElement("div",{className:"".concat(a,"-container"),style:P},Oe,s.createElement($.Z,null,Se()))))))}function re(e){return s.createElement(m.oK,null,s.createElement(He,e))}re.StepForm=je,re.useForm=x.Z.useForm;var Ne=re},98211:function(){}}]);
